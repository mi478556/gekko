(function(){var t={5532:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,{addImport:function(){return et},syncImports:function(){return nt},updateImport:function(){return rt}});var a={};n.r(a),n.d(a,{addGekko:function(){return bt},archiveGekko:function(){return xt},deleteGekko:function(){return St},errorGekko:function(){return Et},syncGekkos:function(){return wt},updateGekko:function(){return Ct}});var i={};n.r(i),n.d(i,{setGlobalWarning:function(){return _t}});var o={};n.r(o),n.d(o,{syncApiKeys:function(){return At},syncExchanges:function(){return Xt}});n(3792),n(3362),n(9085),n(9391);var s=n(8756),c=n(641),u={id:"app"},l={class:"fill"};function d(t,e,n,r,a,i){var o=(0,c.g2)("top"),s=(0,c.g2)("router-view"),d=(0,c.g2)("bottom"),h=(0,c.g2)("modal");return(0,c.uX)(),(0,c.CE)("div",u,[(0,c.bF)(o),(0,c.Lk)("div",l,[(0,c.bF)(s,{class:"view"})]),(0,c.bF)(d),(0,c.bF)(h)])}var h=(0,c.Lk)("div",{id:"top"},null,-1),f=(0,c.Lk)("header",{class:"bg--off-white grd"},[(0,c.Lk)("div",{class:"contain grd-row"},[(0,c.Lk)("h3",{class:"py1 px2 col-2"},"Gekko UI")])],-1),k={class:"bg--light-gray"},p={class:"menu contain"},m=(0,c.Lk)("a",{class:"py1",href:"https://gekko.wizb.it/docs/introduction/about_gekko.html",target:"_blank"},"Documentation",-1);function g(t,e,n,r,a,i){var o=(0,c.g2)("router-link");return(0,c.uX)(),(0,c.CE)("div",null,[h,f,(0,c.Lk)("nav",k,[(0,c.Lk)("div",p,[(0,c.bF)(o,{class:"py1",to:"/home"},{default:(0,c.k6)((function(){return[(0,c.eW)("Home")]})),_:1}),(0,c.bF)(o,{class:"py1",to:"/live-gekkos"},{default:(0,c.k6)((function(){return[(0,c.eW)("Live Gekkos")]})),_:1}),(0,c.bF)(o,{class:"py1",to:"/backtest"},{default:(0,c.k6)((function(){return[(0,c.eW)("Backtest")]})),_:1}),(0,c.bF)(o,{class:"py1",to:"/data"},{default:(0,c.k6)((function(){return[(0,c.eW)("Local data")]})),_:1}),(0,c.bF)(o,{class:"py1",to:"/config"},{default:(0,c.k6)((function(){return[(0,c.eW)("Config")]})),_:1}),m])])])}var v={},y=n(6262);const L=(0,y.A)(v,[["render",g]]);var w=L,b=n(33),C={class:"p2 bg--off-white"},x={class:"contain"},E=(0,c.Lk)("p",null,[(0,c.Lk)("em",null,"Use Gekko at your own risk.")],-1);function S(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("footer",C,[(0,c.Lk)("div",x,[E,(0,c.Lk)("p",null,"Using Gekko v"+(0,b.v_)(t.version.gekko)+" and Gekko UI v"+(0,b.v_)(t.version.ui)+".",1)])])}var A=JSON.parse('{"name":"gekko-vue-ui","version":"0.2.3","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build"},"dependencies":{"marked":"^12.0.2","npm-check-updates":"^16.14.20","superagent":"^9.0.2","superagent-no-cache":"github:uditalias/superagent-no-cache","vue":"^3.4.27","vue-router":"^4.3.2","vuex":"^4.1.0"},"devDependencies":{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-service":"^5.0.8","babel-plugin-transform-commonjs-es2015-modules":"^4.0.1","copy-webpack-plugin":"^12.0.2","pug":"^3.0.3","pug-plain-loader":"^1.1.0","vue-template-compiler":"^2.7.16"},"postcss":{"plugins":{"autoprefixer":{}}},"browserslist":["> 1%","last 2 versions","not ie <= 8"]}'),X=JSON.parse('{"name":"gekko","version":"0.6.8","description":"A bitcoin trading bot for auto trading at various exchanges","keywords":["trading","bot","bitcoin","TA","finance"],"scripts":{"test":"./node_modules/.bin/mocha test/*.js --recursive test -u tdd --reporter spec","start":"node ./gekko --config config.js --ui"},"author":"Mike van Rossum <mike@mvr.me>","dependencies":{"@koa/cors":"^5.0.0","async":"3.2.5","bitfinex-api-node":"^6.0.0","co-fs":"^1.2.0","commander":"^12.1.0","gekko":"0.0.9","humanize-duration":"^3.32.1","koa":"^2.15.3","koa-bodyparser":"^4.4.1","koa-cors":"0.0.16","koa-logger":"^3.2.1","koa-router":"^12.0.1","koa-static":"^5.0.0","lodash":"4.x","moment":"^2.30.1","opn":"^5.5.0","promisify-node":"^0.5.0","prompt-lite":"0.1.1","relieve":"^2.2.3","retry":"^0.13.1","semver":"7.6.2","sqlite3":"^5.1.7","stats-lite":"^2.2.0","tiny-promisify":"^1.0.0","toml":"^3.0.0","ws":"^8.17.0"},"devDependencies":{"chai":"^5.1.1","mocha":"^10.4.0","proxyquire":"^2.1.3","request":"^2.83.0","request-promise":"^4.2.2","sinon":"^18.0.0"},"engines":{"node":">=18.0.0"},"license":"MIT","repository":{"type":"git","url":"https://github.com/askmike/gekko.git"}}'),T=X,F=A,P={data:function(){return{version:{gekko:T.version,ui:F.version}}}};const z=(0,y.A)(P,[["render",S]]);var Q=z,W={key:0},M=(0,c.Lk)("div",{id:"modal-background"},null,-1),G={class:"modal",id:"modal"},$=["innerHTML"];function D(t,e,n,r,a,i){return i.active?((0,c.uX)(),(0,c.CE)("div",W,[M,(0,c.Lk)("div",G,[(0,c.Lk)("div",{class:"modal-guts",innerHTML:i.content},null,8,$)])])):(0,c.Q3)("",!0)}n(7495),n(906),n(778);var I=n(23),K=I["default"],U=new K.Renderer;U.link=function(t,e,n){var r,a,i;return r=/^https?:\/\/.+$/.test(t),a=r||"newWindow"===e,i='<a href="'+t+'"',a&&(i+=' target="_blank"'),e&&"newWindow"!==e&&(i+=' title="'+e+'"'),i+">"+n+"</a>"},K.setOptions({renderer:U});var R=K,Y={disconnected:R("\n\n## Disconnected\n\nSomething happened to either Gekko or the connection.\nPlease check the terminal where Gekko is running or\nyour network connection.\n\n*This message is shown when the UI is unable to open a websocket connection with the Gekko Server.*\n\n  ")},H={computed:{active:function(){return!this.$store.state.warnings.connected},content:function(){return this.$store.state.warnings.connected?"":Y.disconnected}}};const O=(0,y.A)(H,[["render",D]]);var N=O,V={name:"app",components:{top:w,bottom:Q,modal:N}};const j=(0,y.A)(V,[["render",d]]);var B=j,q=n(5220),J=n(6278),Z=n(2543),tt=n.n(Z),et=(n(8980),n(4114),function(t,e){return t.imports.push(e),t}),nt=function(t,e){return t.imports=e,t},rt=function(t,e){var n=t.imports.findIndex((function(t){return t.id===e.import_id})),r=t.imports[n];if(!r)return t;var a=s["default"].util.extend(r,e.updates);return s["default"].set(t.imports,n,a),t},at=n(1114),it=n(1034),ot=n(6437),st=n.n(ot),ct=n(4550),ut=n.n(ct),lt=n(4296),dt=n.n(lt),ht=st(),ft=ut(),kt=dt();n(8706),n(4423);var pt=["marketUpdate"],mt=["marketStart","stratWarmupCompleted"],gt=["tradeCompleted","advice","roundtrip"],vt=function(t,e){var n=e.type,r=e.payload;return t=kt(kt({},t),{},{latestUpdate:new Date}),gt.includes(n)&&(t=t.events[n]?kt(kt({},t),{},{events:kt(kt({},t.events),{},ft({},n,[].concat(ht(t.events[n]),[r])))}):kt(kt({},t),{},{events:kt(kt({},t.events),{},ft({},n,[r]))})),t.events.initial[n]||pt.includes(n)||(t=kt(kt({},t),{},{events:kt(kt({},t.events),{},{initial:kt(kt({},t.events.initial),{},ft({},n,r))})})),mt.includes(n)||(t=kt(kt({},t),{},{events:kt(kt({},t.events),{},{latest:kt(kt({},t.events.latest),{},ft({},n,r))})})),t},yt=vt,Lt=yt,wt=function(t,e){return e?(t.gekkos=e.live,t.archivedGekkos=e.archive,t):t},bt=function(t,e){return t.gekkos=(0,it.A)((0,it.A)({},t.gekkos),{},(0,at.A)({},e.id,e)),t},Ct=function(t,e){return e.id&&tt().has(t.gekkos,e.id)?(t.gekkos=(0,it.A)((0,it.A)({},t.gekkos),{},(0,at.A)({},e.id,Lt(t.gekkos[e.id],e.event))),t):console.error("cannot update unknown gekko..")},xt=function(t,e){return tt().has(t.gekkos,e)?(t.archivedGekkos=(0,it.A)((0,it.A)({},t.archivedGekkos),{},(0,at.A)({},e,(0,it.A)((0,it.A)({},t.gekkos[e]),{},{stopped:!0,active:!1}))),t.gekkos=tt().omit(t.gekkos,e),t):console.error("cannot archive unknown gekko..")},Et=function(t,e){return tt().has(t.gekkos,e.id)?(t.gekkos=(0,it.A)((0,it.A)({},t.gekkos),{},(0,at.A)({},e.id,(0,it.A)((0,it.A)({},t.gekkos[e.id]),{},{errored:!0,errorMessage:e.error}))),t):console.error("cannot error unknown gekko..")},St=function(t,e){return tt().has(t.archivedGekkos,e)?(t.archivedGekkos=tt().omit(t.archivedGekkos,e),t):console.error("cannot delete unknown gekko..")},_t=function(t,e){return t.warnings[e.key]=e.value,t},At=function(t,e){return s["default"].set(t,"apiKeys",e),t},Xt=function(t,e){return s["default"].set(t,"exchanges",e),t};s["default"].use(J.Ay);var Tt=!1,Ft={};tt().merge(Ft,r),tt().merge(Ft,a),tt().merge(Ft,i),tt().merge(Ft,o);var Pt=new J.Ay.Store({state:{warnings:{connected:!0},imports:[],gekkos:{},archivedGekkos:{},connection:{disconnected:!1,reconnected:!1},apiKeys:[],exchanges:{}},mutations:Ft,strict:Tt}),zt=n(3751),Qt=(0,c.Lk)("h2",{class:"contain"},"Backtest",-1),Wt=(0,c.Lk)("div",{class:"hr"},null,-1),Mt={key:0},Gt={class:"txt--center"},$t={key:1,class:"scan-btn"},Dt=(0,c.Lk)("p",null,"Running backtest..",-1);function It(t,e,n,r,a,i){var o=(0,c.g2)("config-builder"),s=(0,c.g2)("spinner"),u=(0,c.g2)("result");return(0,c.uX)(),(0,c.CE)("div",null,[Qt,Wt,(0,c.bF)(o,{onConfig:i.check},null,8,["onConfig"]),t.backtestable?((0,c.uX)(),(0,c.CE)("div",Mt,[(0,c.Lk)("div",Gt,["fetching"!==t.backtestState?((0,c.uX)(),(0,c.CE)("a",{key:0,class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.run&&i.run.apply(i,arguments)}),["prevent"]))},"Backtest")):(0,c.Q3)("",!0),"fetching"===t.backtestState?((0,c.uX)(),(0,c.CE)("div",$t,[Dt,(0,c.bF)(s)])):(0,c.Q3)("",!0)])])):(0,c.Q3)("",!0),t.backtestResult&&"fetched"===t.backtestState?((0,c.uX)(),(0,c.Wv)(u,{key:1,result:t.backtestResult},null,8,["result"])):(0,c.Q3)("",!0)])}var Kt=(0,c.Lk)("div",{class:"hr"},null,-1),Ut=(0,c.Lk)("div",{class:"hr"},null,-1),Rt=(0,c.Lk)("div",{class:"hr"},null,-1);function Yt(t,e,n,r,a,i){var o=(0,c.g2)("dataset-picker"),s=(0,c.g2)("strat-picker"),u=(0,c.g2)("paper-trader");return(0,c.uX)(),(0,c.CE)("div",null,[(0,c.bF)(o,{class:"my2 contain",onDataset:i.updateDataset},null,8,["onDataset"]),Kt,(0,c.bF)(s,{class:"my2 contain",onStratConfig:i.updateStrat},null,8,["onStratConfig"]),Ut,(0,c.bF)(u,{class:"contain",onSettings:i.updatePaperTrader},null,8,["onSettings"]),Rt])}var Ht=(0,c.Lk)("h3",null,"Select a dataset",-1),Ot={key:0,class:"txt--center my2"},Nt={key:1,class:"txt--center my2"},Vt={key:2,class:"my2"},jt={key:0},Bt={class:"full"},qt=(0,c.Lk)("thead",null,[(0,c.Lk)("tr",null,[(0,c.Lk)("th"),(0,c.Lk)("th",null,"exchange"),(0,c.Lk)("th",null,"currency"),(0,c.Lk)("th",null,"asset"),(0,c.Lk)("th",null,"from"),(0,c.Lk)("th",null,"to"),(0,c.Lk)("th",null,"duration")])],-1),Jt={class:"radio"},Zt=["value","id"],te=["for"],ee=["for"],ne=["for"],re=["for"],ae=["for"],ie=["for"],oe=(0,c.Lk)("label",{for:"customFrom"},"From:",-1),se=(0,c.Lk)("label",{for:"customTo"},"To:",-1),ce={key:1},ue=(0,c.Lk)("a",{href:"#/data/importer"},"Lets add some",-1);function le(t,e,n,r,a,i){var o=(0,c.g2)("spinner");return(0,c.uX)(),(0,c.CE)("div",null,[Ht,"idle"===t.datasetScanstate?((0,c.uX)(),(0,c.CE)("div",Ot,[(0,c.Lk)("a",{class:"w100--s btn--primary scan-btn",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return t.scan&&t.scan.apply(t,arguments)}),["prevent"]))},"Scan available data")])):(0,c.Q3)("",!0),"scanning"===t.datasetScanstate?((0,c.uX)(),(0,c.CE)("div",Nt,[(0,c.bF)(o)])):(0,c.Q3)("",!0),"scanned"===t.datasetScanstate?((0,c.uX)(),(0,c.CE)("div",Vt,[0!=t.datasets.length?((0,c.uX)(),(0,c.CE)("div",jt,[(0,c.Lk)("table",Bt,[qt,(0,c.Lk)("tbody",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.datasets,(function(n,r){return(0,c.uX)(),(0,c.CE)("tr",null,[(0,c.Lk)("td",Jt,[(0,c.bo)((0,c.Lk)("input",{type:"radio",name:"dataset",value:r,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.setIndex=e}),id:n.id},null,8,Zt),[[zt.XL,t.setIndex]])]),(0,c.Lk)("td",null,[(0,c.Lk)("label",{for:n.id},(0,b.v_)(n.exchange),9,te)]),(0,c.Lk)("td",null,[(0,c.Lk)("label",{for:n.id},(0,b.v_)(n.currency),9,ee)]),(0,c.Lk)("td",null,[(0,c.Lk)("label",{for:n.id},(0,b.v_)(n.asset),9,ne)]),(0,c.Lk)("td",null,[(0,c.Lk)("label",{for:n.id},(0,b.v_)(i.fmt(n.from)),9,re)]),(0,c.Lk)("td",null,[(0,c.Lk)("label",{for:n.id},(0,b.v_)(i.fmt(n.to)),9,ae)]),(0,c.Lk)("td",null,[(0,c.Lk)("label",{for:n.id},(0,b.v_)(i.humanizeDuration(n.to.diff(n.from))),9,ie)])])})),256))])]),t.rangeVisible?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("a",{key:0,class:"btn--primary",href:"#",onClick:e[2]||(e[2]=(0,zt.D$)((function(){return i.openRange&&i.openRange.apply(i,arguments)}),["prevent"]))},"Adjust range")),t.rangeVisible?((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[(0,c.Lk)("div",null,[oe,(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.customFrom=e})},null,512),[[zt.Jo,t.customFrom]])]),(0,c.Lk)("div",null,[se,(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.customTo=e})},null,512),[[zt.Jo,t.customTo]])])],64)):(0,c.Q3)("",!0)])):((0,c.uX)(),(0,c.CE)("em",ce,[(0,c.eW)("No Data found "),ue]))])):(0,c.Q3)("",!0)])}n(9432);var de,he,fe,ke=n(5734),pe=n.n(ke),me=n(1084),ge=n.n(me),ve=(n(8706),window.CONFIG.ui),ye="".concat(ve.host).concat(80===ve.port?"":":".concat(ve.port)).concat(ve.path);de=ve.ssl?"https://".concat(ye):"http://".concat(ye),he=de+"api/",fe=ve.ssl?"wss://".concat(ye,"api"):"ws://".concat(ye,"api");var Le=function(t){return function(e,n){if(e)return t(e);if(!n.text)return t("no data");var r=JSON.parse(n.text);t(!1,r)}},we=function(t,e,n){pe().post(he+t).use(ge()).send(e).end(Le(n))},be=function(t,e){pe().get(he+t).use(ge()).end(Le(e))},Ce={class:"spinner"},xe=(0,c.Lk)("div",{class:"rect1"},null,-1),Ee=(0,c.Lk)("div",{class:"rect2"},null,-1),Se=(0,c.Lk)("div",{class:"rect3"},null,-1),_e=(0,c.Lk)("div",{class:"rect4"},null,-1),Ae=[xe,Ee,Se,_e];function Xe(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",Ce,Ae)}var Te={};const Fe=(0,y.A)(Te,[["render",Xe]]);var Pe=Fe,ze=(n(2008),n(6910),n(6099),n(3500),{data:function(){return{datasets:[],datasetScanstate:"idle",unscannableMakets:[]}},methods:{scan:function(){var t=this;this.datasetScanstate="scanning",we("scansets",{},(function(e,n){t.datasetScanstate="scanned",t.unscannableMakets=n.errors;var r=[];n.datasets.forEach((function(t){t.ranges.forEach((function(e,n){r.push({exchange:t.exchange,currency:t.currency,asset:t.asset,from:moment.unix(e.from).utc(),to:moment.unix(e.to).utc(),id:t.exchange+t.asset+t.currency+n})}))})),r=r.filter((function(t){if(t.to.diff(t.from,"hours")>2)return!0})),r=r.sort((function(t,e){var n=t.to.diff(t.from),r=e.to.diff(e.from);return n<r?-1:n>r?1:0})).reverse(),t.datasets=r}))}}}),Qe=ze,We={components:{spinner:Pe},data:function(){return{setIndex:-1,customTo:!1,customFrom:!1,rangeVisible:!1,set:!1}},mixins:[Qe],methods:{humanizeDuration:function(t){return window.humanizeDuration(t,{largest:4})},fmt:function(t){return t.utc().format("YYYY-MM-DD HH:mm")},openRange:function(){if(-1===this.setIndex)return alert("Select a dataset to adjust range");this.updateCustomRange(),this.rangeVisible=!0},updateCustomRange:function(){this.customTo=this.fmt(this.set.to),this.customFrom=this.fmt(this.set.from)},emitSet:function(t){var e;t&&(this.customTo?(e=s["default"].util.extend({},t),e.to=moment.utc(this.customTo,"YYYY-MM-DD HH:mm").format(),e.from=moment.utc(this.customFrom,"YYYY-MM-DD HH:mm").format()):e=t,this.$emit("dataset",e))}},watch:{setIndex:function(){this.set=this.datasets[this.setIndex],this.updateCustomRange(),this.emitSet(this.set)},customTo:function(){this.emitSet(this.set)},customFrom:function(){this.emitSet(this.set)}}};const Me=(0,y.A)(We,[["render",le]]);var Ge=Me,$e=(n(2010),{class:"grd"}),De={class:"grd-row"},Ie={class:"grd-row-col-3-6 px1"},Ke=(0,c.Lk)("h3",null,"Strategy",-1),Ue=(0,c.Lk)("label",{class:"wrapper",for:"strat"},"Strategy:",-1),Re={class:"custom-select button"},Ye=(0,c.Lk)("label",{for:"candleSize"},"Candle Size",-1),He={class:"grd-row"},Oe={class:"grd-row-col-3-6"},Ne={class:"grd-row-col-3-6 align"},Ve={class:"custom-select button"},je=(0,c.Lk)("option",null,"minutes",-1),Be=(0,c.Lk)("option",null,"hours",-1),qe=(0,c.Lk)("option",null,"days",-1),Je=[je,Be,qe],Ze={for:"historySize"},tn={class:"label-like"},en={class:"grd-row-col-3-6 px1"},nn=(0,c.Lk)("h3",null,"Parameters",-1),rn={key:0,class:"bg--red p1"};function an(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",$e,[(0,c.Lk)("div",De,[(0,c.Lk)("div",Ie,[Ke,(0,c.Lk)("div",null,[Ue,(0,c.Lk)("div",Re,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.strategy=e})},[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.strategies,(function(t){return(0,c.uX)(),(0,c.CE)("option",null,(0,b.v_)(t.name),1)})),256))],512),[[zt.u1,t.strategy]])])]),(0,c.Lk)("div",null,[Ye,(0,c.Lk)("div",He,[(0,c.Lk)("div",Oe,[(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.rawCandleSize=e})},null,512),[[zt.Jo,t.rawCandleSize]])]),(0,c.Lk)("div",Ne,[(0,c.Lk)("div",Ve,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.candleSizeUnit=e})},Je,512),[[zt.u1,t.candleSizeUnit]])])])])]),(0,c.Lk)("div",null,[(0,c.Lk)("label",Ze,"Warmup period (in "+(0,b.v_)(t.rawCandleSize)+" "+(0,b.v_)(i.singularCandleSizeUnit)+" candles):",1),(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.historySize=e})},null,512),[[zt.Jo,t.historySize]]),(0,c.Lk)("em",tn,"(will use "+(0,b.v_)(i.humanizeDuration(i.candleSize*t.historySize*1e3*60))+" of data as history)",1)])]),(0,c.Lk)("div",en,[(0,c.Lk)("div",null,[nn,(0,c.Lk)("p",null,(0,b.v_)(t.strategy)+" Parameters:",1),(0,c.bo)((0,c.Lk)("textarea",{class:"params","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.rawStratParams=e})},null,512),[[zt.Jo,t.rawStratParams]]),t.rawStratParamsError?((0,c.uX)(),(0,c.CE)("p",rn,(0,b.v_)(t.rawStratParamsError.message),1)):(0,c.Q3)("",!0)])])])])}n(113),n(4782);var on={data:function(){return{strategies:[],candleSizeUnit:"hours",rawCandleSize:1,strategy:"MACD",historySize:10,rawStratParams:"",rawStratParamsError:!1,emptyStrat:!1,stratParams:{}}},created:function(){var t=this;be("strategies",(function(e,n){t.strategies=n,tt().each(t.strategies,(function(t){t.empty=""===t.params})),t.rawStratParams=tt().find(t.strategies,{name:t.strategy}).params,t.emptyStrat=tt().find(t.strategies,{name:t.strategy}).empty,t.emitConfig()}))},watch:{strategy:function(t){t=tt().find(this.strategies,{name:t}),this.rawStratParams=t.params,this.emptyStrat=t.empty,this.emitConfig()},candleSize:function(){this.emitConfig()},historySize:function(){this.emitConfig()},rawStratParams:function(){this.emitConfig()}},computed:{candleSize:function(){return"minutes"===this.candleSizeUnit?this.rawCandleSize:"hours"===this.candleSizeUnit?60*this.rawCandleSize:"days"===this.candleSizeUnit?60*this.rawCandleSize*24:void 0},singularCandleSizeUnit:function(){return this.candleSizeUnit.slice(0,-1)},config:function(){var t={tradingAdvisor:{enabled:!0,method:this.strategy,candleSize:+this.candleSize,historySize:+this.historySize}};return this.emptyStrat?t[this.strategy]={__empty:!0}:t[this.strategy]=this.stratParams,t}},methods:{humanizeDuration:function(t){return window.humanizeDuration(t)},emitConfig:function(){this.parseParams(),this.$emit("stratConfig",this.config)},parseParams:function(){try{this.stratParams=toml.parse(this.rawStratParams),this.rawStratParamsError=!1}catch(t){this.rawStratParamsError=t,this.stratParams={}}}}};const sn=(0,y.A)(on,[["render",an]]);var cn=sn,un={class:"grd"},ln={class:"px1"},dn=(0,c.Lk)("h3",null,"Paper trader",-1),hn=(0,c.Lk)("p",null,"Settings:",-1),fn={key:0,class:"bg--red p1"};function kn(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",un,[(0,c.Lk)("div",ln,[dn,"closed"===t.toggle?((0,c.uX)(),(0,c.CE)("a",{key:0,class:"btn--primary",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.switchToggle&&i.switchToggle.apply(i,arguments)}),["prevent"]))},"Change paper trader settings")):(0,c.Q3)("",!0),"open"===t.toggle?((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[hn,(0,c.bo)((0,c.Lk)("textarea",{class:"params","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.rawPaperTraderParams=e})},null,512),[[zt.Jo,t.rawPaperTraderParams]]),t.rawPaperTraderParamsError?((0,c.uX)(),(0,c.CE)("p",fn,(0,b.v_)(t.rawPaperTraderParamsError.message),1)):(0,c.Q3)("",!0)],64)):(0,c.Q3)("",!0)])])}var pn={created:function(){var t=this;be("configPart/paperTrader",(function(e,n){t.rawPaperTraderParams=n.part}))},data:function(){return{rawPaperTraderParams:"",rawPaperTraderParamsError:!1,paperTraderParams:{},toggle:"closed"}},watch:{rawPaperTraderParams:function(){this.emitConfig()}},methods:{switchToggle:function(){"open"===this.toggle?this.toggle="closed":this.toggle="open"},emitConfig:function(){this.parseParams(),this.$emit("settings",this.paperTraderParams)},parseParams:function(){try{this.paperTraderParams=toml.parse(this.rawPaperTraderParams),this.paperTraderParams.reportRoundtrips=!0,this.rawPaperTraderParamsError=!1}catch(t){this.rawPaperTraderParamsError=t,this.paperTraderParams={}}}}};const mn=(0,y.A)(pn,[["render",kn]]);var gn=mn,vn={created:function(){var t=this;be("configPart/performanceAnalyzer",(function(e,n){t.performanceAnalyzer=toml.parse(n.part),t.performanceAnalyzer.enabled=!0}))},data:function(){return{dataset:{},strat:{},paperTrader:{},performanceAnalyzer:{}}},components:{stratPicker:cn,datasetPicker:Ge,paperTrader:gn},computed:{market:function(){return this.dataset.exchange?{exchange:this.dataset.exchange,currency:this.dataset.currency,asset:this.dataset.asset}:{}},range:function(){return this.dataset.exchange?{from:this.dataset.from,to:this.dataset.to}:{}},config:function(){var t={};return Object.assign(t,{watch:this.market},{paperTrader:this.paperTrader},this.strat,{backtest:{daterange:this.range},backtestResultExporter:{enabled:!0,writeToDisk:!1,data:{stratUpdates:!1,roundtrips:!0,stratCandles:!0,stratCandleProps:["open"],trades:!0}}},{performanceAnalyzer:this.performanceAnalyzer}),t.valid=this.validConfig(t),t.backtestResultExporter.enabled=!0,t}},methods:{validConfig:function(t){if(!t.backtest)return!1;if(!t.backtest.daterange)return!1;if(tt().isEmpty(t.backtest.daterange))return!1;if(!t.watch)return!1;if(!t.tradingAdvisor)return!1;var e=t.tradingAdvisor.method;if(tt().isEmpty(t[e]))return!1;if(t.tradingAdvisor){if(tt().isNaN(t.tradingAdvisor.candleSize))return!1;if(0==t.tradingAdvisor.candleSize)return!1}return!0},updateDataset:function(t){this.dataset=t,this.$emit("config",this.config)},updateStrat:function(t){this.strat=t,this.$emit("config",this.config)},updatePaperTrader:function(t){this.paperTrader=t,this.paperTrader.enabled=!0,this.$emit("config",this.config)}}};const yn=(0,y.A)(vn,[["render",Yt]]);var Ln=yn,wn=(0,c.Lk)("div",{class:"hr contain"},null,-1),bn=(0,c.Lk)("div",{class:"contain"},[(0,c.Lk)("h3",null,"Backtest result")],-1),Cn=(0,c.Lk)("div",{class:"hr contain"},null,-1),xn=(0,c.Lk)("div",{class:"hr contain"},null,-1);function En(t,e,n,r,a,i){var o=(0,c.g2)("result-summary"),s=(0,c.g2)("chart"),u=(0,c.g2)("roundtripTable");return(0,c.uX)(),(0,c.CE)("div",null,[wn,bn,(0,c.bF)(o,{report:n.result.performanceReport},null,8,["report"]),Cn,(0,c.bF)(s,{data:i.candles,height:"500"},null,8,["data"]),xn,(0,c.bF)(u,{roundtrips:n.result.roundtrips},null,8,["roundtrips"])])}var Sn={class:"contain"},_n={class:"grd-row summary"},An={class:"grd-row-col-3-6"},Xn={class:"p1"},Tn=(0,c.Lk)("th",null,"start time",-1),Fn=(0,c.Lk)("th",null,"end time",-1),Pn=(0,c.Lk)("th",null,"timespan",-1),zn=(0,c.Lk)("th",null,"start price",-1),Qn=(0,c.Lk)("th",null,"end price",-1),Wn=(0,c.Lk)("th",null,"market",-1);function Mn(t,e,n,r,a,i){var o=(0,c.g2)("paperTradeSummary");return(0,c.uX)(),(0,c.CE)("div",Sn,[(0,c.Lk)("div",_n,[(0,c.Lk)("div",An,[(0,c.Lk)("table",Xn,[(0,c.Lk)("tr",null,[Tn,(0,c.Lk)("td",null,(0,b.v_)(n.report.startTime),1)]),(0,c.Lk)("tr",null,[Fn,(0,c.Lk)("td",null,(0,b.v_)(n.report.endTime),1)]),(0,c.Lk)("tr",null,[Pn,(0,c.Lk)("td",null,(0,b.v_)(n.report.timespan),1)]),(0,c.Lk)("tr",null,[zn,(0,c.Lk)("td",null,(0,b.v_)(i.round(n.report.startPrice))+" "+(0,b.v_)(n.report.currency),1)]),(0,c.Lk)("tr",null,[Qn,(0,c.Lk)("td",null,(0,b.v_)(i.round(n.report.endPrice))+" "+(0,b.v_)(n.report.currency),1)]),(0,c.Lk)("tr",null,[Wn,(0,c.Lk)("td",null,(0,b.v_)(i.round(n.report.market))+"%",1)])])]),(0,c.bF)(o,{report:n.report},null,8,["report"])])])}n(9868);var Gn={class:"grd-row-col-3-6"},$n={class:"p1"},Dn=(0,c.Lk)("th",null,"amount of trades",-1),In=(0,c.Lk)("th",null,"sharpe ratio",-1),Kn=(0,c.Lk)("th",null,"start balance",-1),Un=(0,c.Lk)("th",null,"final balance",-1),Rn=(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"simulated profit")],-1);function Yn(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",Gn,[(0,c.Lk)("table",$n,[(0,c.Lk)("tr",null,[Dn,(0,c.Lk)("td",null,(0,b.v_)(n.report.trades),1)]),(0,c.Lk)("tr",null,[In,(0,c.Lk)("td",null,(0,b.v_)(i.round2(n.report.sharpe)),1)]),(0,c.Lk)("tr",null,[Kn,(0,c.Lk)("td",null,(0,b.v_)(i.round(n.report.startBalance))+" "+(0,b.v_)(n.report.currency),1)]),(0,c.Lk)("tr",null,[Un,(0,c.Lk)("td",null,(0,b.v_)(i.round(n.report.balance))+" "+(0,b.v_)(n.report.currency),1)]),Rn]),(0,c.Lk)("div",{class:(0,b.C4)(["big txt--right price",i.profitClass])},(0,b.v_)(i.round(n.report.relativeProfit))+"%",3)])}var Hn={props:["report"],methods:{round2:function(t){return(+t).toFixed(2)},round:function(t){return(+t).toFixed(5)}},computed:{profitClass:function(){return this.report.relativeProfit>0?"profit":"loss"}}};const On=(0,y.A)(Hn,[["render",Yn]]);var Nn=On,Vn={props:["report"],components:{paperTradeSummary:Nn},methods:{round:function(t){return(+t).toFixed(5)}},computed:{profitClass:function(){return this.report.relativeProfit>0?"profit":"loss"}}};const jn=(0,y.A)(Vn,[["render",Mn]]);var Bn=jn,qn=["height"];function Jn(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",{id:"chartWrapper",class:(0,b.C4)({clickable:!t.isClicked})},[(0,c.Lk)("div",{class:"shield",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.click&&i.click.apply(i,arguments)}),["prevent"]))}),((0,c.uX)(),(0,c.CE)("svg",{id:"chart",width:"960",height:n.height},null,8,qn))],2)}var Zn=n(3644);n(2062);function tr(t,e,n){var r=function(t){return tt().isNumber(t)?moment.unix(t).utc().toDate():moment.utc(t).toDate()},a=e.map((function(t){return{price:t.price,date:r(t.date),action:t.action}})),i=t.map((function(t){return{price:t.open,date:r(t.start)}})),o=i.map((function(t){return+t.date})),s=i.map((function(t){return+t.price})),c=d3.select("#chart");c.attr("width",window.innerWidth-20);var u={top:20,right:20,bottom:110,left:40},l=n-u.top-u.bottom,d={top:n-70,right:20,bottom:30,left:40},h=+c.attr("width")-u.left-u.right,f=n-d.top-d.bottom,k=d3.scaleUtc().range([0,h]),p=d3.scaleUtc().range([0,h]),m=d3.scaleLinear().range([l,0]),g=d3.scaleLinear().range([f,0]),v=d3.axisBottom(k),y=d3.axisBottom(p),L=d3.axisLeft(m).ticks(n/50),w=d3.brushX().extent([[0,0],[h,f]]).on("brush end",A),b=d3.zoom().scaleExtent([1,100]).translateExtent([[0,0],[h,l]]).extent([[0,0],[h,l]]).on("zoom",T),C=d3.line().x((function(t){return k(t.date)})).y((function(t){return m(t.price)})),x=d3.line().x((function(t){return p(t.date)})).y((function(t){return g(t.price)}));c.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",h).attr("height",l);var E=c.append("g").attr("class","focus").attr("transform","translate("+u.left+","+u.top+")"),S=c.append("g").attr("class","context").attr("transform","translate("+d.left+","+d.top+")");k.domain(d3.extent(i,(function(t){return t.date}))),m.domain([.99*d3.min(s),1.01*d3.max(s)]),p.domain(k.domain()),g.domain(m.domain()),E.append("path").datum(i).attr("class","line price").attr("d",C),E.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+l+")").call(v),E.append("g").attr("class","axis axis--y").call(L),S.append("path").datum(i).attr("class","line").attr("d",x),S.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+f+")").call(y);var _=c.append("g").attr("transform","translate("+u.left+","+u.top+")").selectAll("circle").data(a).enter().append("circle").attr("class",(function(t){return t.action})).attr("cx",(function(t){return k(t.date)})).attr("cy",(function(t){return m(t.price)})).attr("r",5);S.append("g").selectAll("circle").data(a).enter().append("circle").attr("class",(function(t){return t.action})).attr("cx",(function(t){return p(t.date)})).attr("cy",(function(t){return g(t.price)})).attr("r",3);function A(){if(!d3.event.sourceEvent||"zoom"!==d3.event.sourceEvent.type){var t=d3.event.selection||p.range();k.domain(t.map(p.invert,p)),X(k.domain()),c.select(".axis--y").call(L),_.attr("cx",(function(t){return k(t.date)})).attr("cy",(function(t){return m(t.price)})),E.select(".line").attr("d",C),E.select(".axis--x").call(v),c.select(".zoom").call(b.transform,d3.zoomIdentity.scale(h/(t[1]-t[0])).translate(-t[0],0))}}function X(t){var e=(0,Zn.A)(t,2),n=e[0],r=e[1],a=tt().sortedIndex(o,n),i=tt().sortedIndex(o,r),c=s.slice(a,i);m.domain([.9995*d3.min(c),1.0005*d3.max(c)])}function T(){if(!d3.event.sourceEvent||"brush"!==d3.event.sourceEvent.type){var t=d3.event.transform;X(t.rescaleX(p).domain()),c.select(".axis--y").call(L),k.domain(t.rescaleX(p).domain()),E.select(".line").attr("d",C),_.attr("cx",(function(t){return k(t.date)})).attr("cy",(function(t){return m(t.price)})),E.select(".axis--x").call(v),S.select(".brush").call(w.move,k.range().map(t.invertX,t))}}S.append("g").attr("class","brush").call(w).call(w.move,k.range()),c.append("rect").attr("class","zoom").attr("width",h).attr("height",l).attr("transform","translate("+u.left+","+u.top+")").call(b)}var er=function(t){d3.select("#chart").append("text").attr("class","message").attr("x",150).attr("y",150).text(t)},nr=4,rr={props:["data","height"],data:function(){return{isClicked:!1}},watch:{data:function(){this.render()}},created:function(){setTimeout(this.render,100)},beforeDestroy:function(){this.remove()},methods:{click:function(){this.isClicked=!0},render:function(){this.remove(),_.size(this.data.candles)<nr?er("Not enough data to spawn chart"):tr(this.data.candles,this.data.trades,this.height)},remove:function(){d3.select("#chart").html("")}}};const ar=(0,y.A)(rr,[["render",Jn]]);var ir=ar,or=(n(5914),{class:"contain roundtrips"}),sr=(0,c.Lk)("h2",null,"Roundtrips",-1),cr={key:0},ur=(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"Entry at (UTC)"),(0,c.Lk)("th",null,"Exit at (UTC)"),(0,c.Lk)("th",null,"Exposure"),(0,c.Lk)("th",null,"Entry balance"),(0,c.Lk)("th",null,"Exit balance"),(0,c.Lk)("th",null,"P&L"),(0,c.Lk)("th",null,"Profit")],-1),lr={class:"loss"},dr={class:"loss"},hr={class:"profit"},fr={class:"profit"},kr={key:1},pr=(0,c.Lk)("p",null,"Not enough data to display",-1),mr=[pr];function gr(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",or,[sr,n.roundtrips.length?((0,c.uX)(),(0,c.CE)("table",cr,[(0,c.Lk)("thead",null,[ur,((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(n.roundtrips,(function(t){return(0,c.uX)(),(0,c.CE)("tr",null,[(0,c.Lk)("td",null,(0,b.v_)(i.fmt(t.entryAt)),1),(0,c.Lk)("td",null,(0,b.v_)(i.fmt(t.exitAt)),1),(0,c.Lk)("td",null,(0,b.v_)(i.diff(t.duration)),1),(0,c.Lk)("td",null,(0,b.v_)(i.round(t.entryBalance)),1),(0,c.Lk)("td",null,(0,b.v_)(i.round(t.exitBalance)),1),-1===Math.sign(t.pnl)?((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.Lk)("td",lr,(0,b.v_)(Math.sign(t.pnl)*t.pnl.toFixed(2)),1),(0,c.Lk)("td",dr,(0,b.v_)(t.profit.toFixed(2))+"%",1)],64)):((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[(0,c.Lk)("td",hr,(0,b.v_)(t.pnl.toFixed(2)),1),(0,c.Lk)("td",fr,(0,b.v_)(t.profit.toFixed(2))+"%",1)],64))])})),256))])])):(0,c.Q3)("",!0),n.roundtrips.length?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",kr,mr))])}var vr={props:["roundtrips"],data:function(){return{}},methods:{diff:function(t){return moment.duration(t).humanize()},humanizeDuration:function(t){return window.humanizeDuration(t)},fmt:function(t){var e;return e=tt().isNumber(t)?moment.unix(t):moment(t).utc(),e.utc().format("YYYY-MM-DD HH:mm")},round:function(t){return(+t).toFixed(3)}}};const yr=(0,y.A)(vr,[["render",gr]]);var Lr=yr,wr={props:["result"],data:function(){return{}},methods:{},components:{roundtripTable:Lr,resultSummary:Bn,chart:ir},computed:{candles:function(){return{candles:this.result.stratCandles,trades:this.result.trades}}}};const br=(0,y.A)(wr,[["render",En]]);var Cr=br,xr={data:function(){return{backtestable:!1,backtestState:"idle",backtestResult:!1,config:!1}},methods:{check:function(t){if(this.config=t,!t.valid)return this.backtestable=!1;this.backtestable=!0},run:function(){var t=this;this.backtestState="fetching",we("backtest",this.config,(function(e,n){t.backtestState="fetched",t.backtestResult=n}))}},components:{configBuilder:Ln,result:Cr,spinner:Pe}};const Er=(0,y.A)(xr,[["render",It]]);var Sr=Er,_r={class:"contain grd-row"},Ar=["innerHTML"],Xr=(0,c.Lk)("div",{class:"grd-row-col-3-6 txt--center"},[(0,c.Lk)("img",{src:"static/gekko.jpg"}),(0,c.Lk)("p",null,[(0,c.Lk)("em",null,"The most valuable commodity I know of is information.")])],-1);function Tr(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("section",_r,[(0,c.Lk)("div",{class:"grd-row-col-3-6",innerHTML:t.left},null,8,Ar),Xr])}var Fr=R("\n\n## Gekko\n\nGekko is a Bitcoin trading bot and backtesting platform that\nconnects to popular Bitcoin exchanges. It is written in javascript\nand runs on nodejs.\n\n[Find out more](https://gekko.wizb.it/).\n\n*Gekko is 100% free (open source), if you paid for this you have been scammed.*\n\n"),Pr={data:function(){return{left:Fr}}};const zr=(0,y.A)(Pr,[["render",Tr]]);var Qr=zr,Wr={class:"contain"},Mr=["innerHTML"],Gr=(0,c.Lk)("div",{class:"hr"},null,-1),$r=(0,c.Lk)("h2",null,"Available datasets",-1),Dr={key:0,class:"txt--center my2"},Ir={key:1,class:"txt--center my2"},Kr={key:2,class:"my2"},Ur={key:0,class:"bg--orange p1 warning my1"},Rr=(0,c.Lk)("p",null,"Unable to find datasets in the following markets:",-1),Yr={class:"mx2"},Hr={key:1,class:"full data"},Or=(0,c.Lk)("thead",null,[(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"exchange"),(0,c.Lk)("th",null,"currency"),(0,c.Lk)("th",null,"asset"),(0,c.Lk)("th",null,"from"),(0,c.Lk)("th",null,"to"),(0,c.Lk)("th",null,"duration")])],-1),Nr={key:2},Vr={class:"my2"},jr=(0,c.Lk)("h2",null,"Import more data",-1),Br=(0,c.Lk)("p",{class:"text"},"You can easily import more market data directly from exchanges using the importer.",-1);function qr(t,e,n,r,a,i){var o=(0,c.g2)("spinner"),s=(0,c.g2)("router-link");return(0,c.uX)(),(0,c.CE)("div",Wr,[(0,c.Lk)("div",{class:"text",innerHTML:t.intro},null,8,Mr),Gr,$r,"idle"===t.datasetScanstate?((0,c.uX)(),(0,c.CE)("div",Dr,[(0,c.Lk)("a",{class:"w100--s btn--primary scan-btn",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return t.scan&&t.scan.apply(t,arguments)}),["prevent"]))},"Scan available data")])):(0,c.Q3)("",!0),"scanning"===t.datasetScanstate?((0,c.uX)(),(0,c.CE)("div",Ir,[(0,c.bF)(o)])):(0,c.Q3)("",!0),"scanned"===t.datasetScanstate?((0,c.uX)(),(0,c.CE)("div",Kr,[t.unscannableMakets.length?((0,c.uX)(),(0,c.CE)("div",Ur,[t.viewUnscannable?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("p",{key:0,class:"clickable",onClick:e[1]||(e[1]=(0,zt.D$)((function(){return i.toggleUnscannable&&i.toggleUnscannable.apply(i,arguments)}),["prevent"]))},"Some markets were unscannable, click here for details.")),t.viewUnscannable?((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[Rr,((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.unscannableMakets,(function(t){return(0,c.uX)(),(0,c.CE)("div",Yr,"- "+(0,b.v_)(t.exchange)+":"+(0,b.v_)(t.currency)+":"+(0,b.v_)(t.asset),1)})),256))],64)):(0,c.Q3)("",!0)])):(0,c.Q3)("",!0),t.datasets.length?((0,c.uX)(),(0,c.CE)("table",Hr,[Or,(0,c.Lk)("tbody",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.datasets,(function(t){return(0,c.uX)(),(0,c.CE)("tr",null,[(0,c.Lk)("td",null,(0,b.v_)(t.exchange),1),(0,c.Lk)("td",null,(0,b.v_)(t.currency),1),(0,c.Lk)("td",null,(0,b.v_)(t.asset),1),(0,c.Lk)("td",null,(0,b.v_)(i.fmt(t.from)),1),(0,c.Lk)("td",null,(0,b.v_)(i.fmt(t.to)),1),(0,c.Lk)("td",null,(0,b.v_)(i.humanizeDuration(t.to.diff(t.from))),1)])})),256))])])):(0,c.Q3)("",!0),t.datasets.length?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("p",Nr,"It looks like you don't have any local data yet."))])):(0,c.Q3)("",!0),(0,c.Lk)("div",Vr,[jr,Br,(0,c.bF)(s,{class:"btn--primary",to:"/data/importer"},{default:(0,c.k6)((function(){return[(0,c.eW)("Go to the importer!")]})),_:1})])])}var Jr=R("\n\n## Local data\n\nGekko needs local market data in order to backtest strategies. The local\ndata can also be used in a warmup period when running a strategy against a\nlive market.\n\n"),Zr={mixins:[Qe],components:{spinner:Pe},data:function(){return{intro:Jr,viewUnscannable:!1}},methods:{toggleUnscannable:function(){this.viewUnscannable=!0},humanizeDuration:function(t){return window.humanizeDuration(t)},fmt:function(t){return t.format("YYYY-MM-DD HH:mm")}}};const ta=(0,y.A)(Zr,[["render",qr]]);var ea=ta,na={class:"contain my2"},ra=["innerHTML"],aa=(0,c.Lk)("div",{class:"hr"},null,-1),ia=(0,c.Lk)("h3",null,"Currently running imports",-1),oa={key:0},sa={key:1},ca=(0,c.Lk)("div",{class:"hr"},null,-1),ua=(0,c.Lk)("h3",null,"Start a new import",-1),la=(0,c.Lk)("div",{class:"hr"},null,-1),da={class:"txt--center"};function ha(t,e,n,r,a,i){var o=(0,c.g2)("router-link"),s=(0,c.g2)("import-config-builder");return(0,c.uX)(),(0,c.CE)("div",na,[(0,c.Lk)("div",{class:"text",innerHTML:t.intro},null,8,ra),aa,ia,0===i.imports.length?((0,c.uX)(),(0,c.CE)("p",oa,"You currently don't have any imports running.")):(0,c.Q3)("",!0),i.imports.length?((0,c.uX)(),(0,c.CE)("ul",sa,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.imports,(function(t){return(0,c.uX)(),(0,c.CE)("li",null,[(0,c.bF)(o,{to:"/data/importer/import/"+t.id},{default:(0,c.k6)((function(){return[(0,c.eW)((0,b.v_)(t.watch.exchange)+":"+(0,b.v_)(t.watch.currency)+"/"+(0,b.v_)(t.watch.asset),1)]})),_:2},1032,["to"])])})),256))])):(0,c.Q3)("",!0),ca,ua,(0,c.bF)(s,{onConfig:i.updateConfig},null,8,["onConfig"]),la,(0,c.Lk)("div",da,[(0,c.Lk)("a",{class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.run&&i.run.apply(i,arguments)}),["prevent"]))},"Import")])])}var fa={class:"grd contain"},ka={class:"grd-row"},pa={class:"grd-row-col-3-6 mx1"},ma=(0,c.Lk)("h3",null,"Market",-1),ga={class:"grd-row-col-3-6 mx1"};function va(t,e,n,r,a,i){var o=(0,c.g2)("market-picker"),s=(0,c.g2)("range-creator");return(0,c.uX)(),(0,c.CE)("div",fa,[(0,c.Lk)("div",ka,[(0,c.Lk)("div",pa,[ma,(0,c.bF)(o,{onMarket:i.updateMarketConfig,"only-importable":"true"},null,8,["onMarket"])]),(0,c.Lk)("div",ga,[(0,c.bF)(s,{onRange:i.updateRange},null,8,["onRange"])])])])}var ya=function(t){return(0,c.Qi)("data-v-6d64edb1"),t=t(),(0,c.jt)(),t},La={class:"mx1"},wa=ya((function(){return(0,c.Lk)("label",{class:"wrapper",for:"exchange"},"Exchange:",-1)})),ba={class:"custom-select button"},Ca={class:"grd-row"},xa={class:"grd-row-col-3-6 mx1"},Ea=ya((function(){return(0,c.Lk)("label",{for:"currency"},"Currency:",-1)})),Sa={class:"custom-select button"},_a={class:"grd-row-col-3-6 mx1"},Aa=ya((function(){return(0,c.Lk)("label",{for:"asset"},"Asset:",-1)})),Xa={class:"custom-select button"};function Ta(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",null,[(0,c.Lk)("div",La,[wa,(0,c.Lk)("div",ba,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.exchange=e})},[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.exchanges,(function(t,e){return(0,c.uX)(),(0,c.CE)("option",{key:e},(0,b.v_)(e),1)})),128))],512),[[zt.u1,t.exchange]])])]),(0,c.Lk)("div",Ca,[(0,c.Lk)("div",xa,[Ea,(0,c.Lk)("div",Sa,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.currency=e})},[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.currencies,(function(t){return(0,c.uX)(),(0,c.CE)("option",{key:t},(0,b.v_)(t),1)})),128))],512),[[zt.u1,t.currency]])])]),(0,c.Lk)("div",_a,[Aa,(0,c.Lk)("div",Xa,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.asset=e})},[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.assets,(function(t){return(0,c.uX)(),(0,c.CE)("option",{key:t},(0,b.v_)(t),1)})),128))],512),[[zt.u1,t.asset]])])])])])}n(2953);var Fa=(0,c.Lk)("h3",null,"Daterange",-1),Pa=(0,c.Lk)("label",{for:"from"},"From",-1),za=(0,c.Lk)("label",{for:"to"},"To",-1);function Qa(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",null,[Fa,(0,c.Lk)("div",null,[Pa,(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.from=e})},null,512),[[zt.Jo,t.from]])]),(0,c.Lk)("div",null,[za,(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.to=e})},null,512),[[zt.Jo,t.to]])])])}var Wa={data:function(){return{from:"",to:""}},created:function(){var t=moment().startOf("minute"),e=t.clone().subtract(3,"months");this.to=this.fmt(t),this.from=this.fmt(e),this.emitRange()},methods:{fmtTs:function(t){return moment.unix(t).utc()},fmt:function(t){return t.utc().format("YYYY-MM-DD HH:mm")},emitRange:function(){this.$emit("range",{from:this.fmtTs(this.from),to:this.fmtTs(this.to)})},emitManualEntry:function(){if(this.from.length<"4"||this.from.length<"4")return this.$emit("range",{});var t=moment.utc(this.from),e=moment.utc(this.to);t.isValid()&&e.isValid()?this.$emit("range",{from:this.fmt(t),to:this.fmt(e)}):this.$emit("range",{})}},watch:{from:function(){this.emitManualEntry()},to:function(){this.emitManualEntry()},config:function(){this.scanned=!1},tab:function(){this.scanned=!1,this.$emit("range",{})},selectedRangeIndex:function(){var t=this.ranges[this.selectedRangeIndex];t&&this.emitRange(t)}}};const Ma=(0,y.A)(Wa,[["render",Qa]]);var Ga=Ma,$a={props:["onlyTradable","onlyImportable"],data:function(){return{exchange:"poloniex",currency:"USDT",asset:"BTC"}},created:function(){this.emitConfig()},computed:{exchanges:function(){var t=Object.assign({},this.$store.state.exchanges);return!tt().isEmpty(t)&&(this.onlyTradable&&tt().each(t,(function(e,n){e.tradable||delete t[n]})),this.onlyImportable&&tt().each(t,(function(e,n){e.importable||delete t[n]})),t)},markets:function(){return this.exchanges?this.exchanges[this.exchange]:null},assets:function(){return this.exchanges?this.exchanges[this.exchange].markets[this.currency]:null},currencies:function(){return this.exchanges?tt().keys(this.exchanges[this.exchange].markets):null},watchConfig:function(){return{watch:{exchange:this.exchange,currency:this.currency,asset:this.asset}}}},watch:{currency:function(){this.emitConfig()},asset:function(){this.emitConfig()},market:function(){this.emitConfig()},exchanges:function(){this.emitConfig()},exchange:function(){this.emitConfig()}},methods:{emitConfig:function(){this.$emit("market",this.watchConfig)}}};const Da=(0,y.A)($a,[["render",Ta],["__scopeId","data-v-6d64edb1"]]);var Ia=Da,Ka={data:function(){return{market:{},range:{}}},components:{marketPicker:Ia,rangeCreator:Ga},computed:{config:function(){var t={};return Object.assign(t,this.market,{importer:{daterange:this.range}},{candleWriter:{enabled:!0}}),t}},methods:{updateMarketConfig:function(t){this.market=t,this.emitConfig()},updateRange:function(t){this.range=t,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)}}};const Ua=(0,y.A)(Ka,[["render",va]]);var Ra=Ua,Ya=R("\n\n## Import data\n\nThe importer can download historical market data directly from the exchange.\n\n"),Ha={components:{importConfigBuilder:Ra,spinner:Pe},data:function(){return{intro:Ya,config:{}}},computed:{imports:function(){return this.$store.state.imports}},methods:{daysApart:function(t){var e=moment(t.to),n=moment(t.from);return e.diff(n,"days")},updateConfig:function(t){this.config=t},run:function(){var t=this,e=this.daysApart(this.config.importer.daterange);if(e<1)return alert("You can only import at least one day of data..");var n=this.$store.state.exchanges[this.config.watch.exchange];if("exchangeMaxHistoryAge"in n&&moment(this.config.importer.daterange.from)<moment().subtract(n.exchangeMaxHistoryAge,"days"))return alert("Your date from is too old for "+this.config.watch.exchange+". It supports only the last "+n.exchangeMaxHistoryAge+" days..");we("import",this.config,(function(e,n){if(e)return alert(e);t.$store.commit("addImport",n),t.$router.push({path:"/data/importer/import/".concat(n.id)})}))}}};const Oa=(0,y.A)(Ha,[["render",ha]]);var Na=Oa,Va={class:"contain my2"},ja={key:0},Ba=(0,c.Lk)("h2",null,"Importing data..",-1),qa={class:"grd"},Ja={class:"grd-row"},Za=(0,c.Lk)("div",{class:"grd-row-col-2-6"},[(0,c.Lk)("strong",null,"Market:")],-1),ti={class:"grd-row-col-4-6"},ei={class:"grd-row"},ni=(0,c.Lk)("div",{class:"grd-row-col-2-6"},[(0,c.Lk)("strong",null,"Currency/Asset:")],-1),ri={class:"grd-row-col-4-6"},ai={class:"grd"},ii={class:"grd-row"},oi=(0,c.Lk)("div",{class:"grd-row-col-2-6"},[(0,c.Lk)("strong",null,"From:")],-1),si={class:"grd-row-col-4-6"},ci={class:"grd-row"},ui=(0,c.Lk)("div",{class:"grd-row-col-2-6"},[(0,c.Lk)("strong",null,"To:")],-1),li={class:"grd-row-col-4-6"},di={key:0,class:"grd-row"},hi=(0,c.Lk)("div",{class:"grd-row-col-2-6"},[(0,c.Lk)("strong",null,"Imported data until:")],-1),fi={class:"grd-row-col-4-6"},ki={key:1,class:"grd-row"},pi=(0,c.Lk)("div",{class:"grd-row-col-2-6"},[(0,c.Lk)("strong",null,"Remaining:")],-1),mi={class:"grd-row-col-4-6"},gi={key:1,class:"contain"},vi={key:1,class:"txt--center"},yi=(0,c.Lk)("h2",null,"Import done",-1),Li={key:2,class:"txt--center"},wi=(0,c.Lk)("h2",null,"ERROR: Unknown import",-1);function bi(t,e,n,r,a,i){var o=(0,c.g2)("spinner"),s=(0,c.g2)("progressBar"),u=(0,c.g2)("router-link"),l=(0,c.g2)("I");return(0,c.uX)(),(0,c.CE)("div",Va,[i.data&&!i.data.done?((0,c.uX)(),(0,c.CE)("div",ja,[Ba,(0,c.Lk)("div",qa,[(0,c.Lk)("div",Ja,[Za,(0,c.Lk)("div",ti,(0,b.v_)(i.data.watch.exchange),1)]),(0,c.Lk)("div",ei,[ni,(0,c.Lk)("div",ri,(0,b.v_)(i.data.watch.currency)+"/"+(0,b.v_)(i.data.watch.asset),1)])]),(0,c.Lk)("div",ai,[(0,c.Lk)("div",ii,[oi,(0,c.Lk)("div",si,(0,b.v_)(i.fmt(i.from)),1)]),(0,c.Lk)("div",ci,[ui,(0,c.Lk)("div",li,(0,b.v_)(i.fmt(i.to)),1)]),i.initialized?((0,c.uX)(),(0,c.CE)("div",di,[hi,(0,c.Lk)("div",fi,(0,b.v_)(i.fmt(i.latest)),1)])):(0,c.Q3)("",!0),i.initialized?((0,c.uX)(),(0,c.CE)("div",ki,[pi,(0,c.Lk)("div",mi,(0,b.v_)(i.fromEnd),1)])):(0,c.Q3)("",!0)]),i.initialized?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.Wv)(o,{key:0})),i.initialized?((0,c.uX)(),(0,c.CE)("div",gi,[(0,c.bF)(s,{progress:i.progress},null,8,["progress"])])):(0,c.Q3)("",!0),(0,c.Lk)("p",null,[(0,c.Lk)("em",null,[(0,c.eW)("(you don't have to wait until the import is done,you can already start "),(0,c.bF)(u,{to:"/backtest"},{default:(0,c.k6)((function(){return[(0,c.eW)("backtesting")]})),_:1}),(0,c.eW)(").")])])])):(0,c.Q3)("",!0),i.data&&i.data.done?((0,c.uX)(),(0,c.CE)("div",vi,[yi,(0,c.Lk)("p",null,[(0,c.eW)(" Go and "),(0,c.bF)(u,{to:"/backtest"},{default:(0,c.k6)((function(){return[(0,c.eW)("backtest")]})),_:1}),(0,c.eW)(" with your new data!")])])):(0,c.Q3)("",!0),i.data?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",Li,[wi,(0,c.Lk)("p",null,[(0,c.bF)(l,null,{default:(0,c.k6)((function(){return[(0,c.eW)("don't know this import..")]})),_:1})])]))])}var Ci={key:0,class:"progressbarWrapper"},xi={class:"progressbar"};function Ei(t,e,n,r,a,i){return n.progress?((0,c.uX)(),(0,c.CE)("div",Ci,[(0,c.Lk)("p",null,[(0,c.Lk)("strong",null,(0,b.v_)(i.round(n.progress))+"%",1)]),(0,c.Lk)("div",xi,[(0,c.Lk)("div",{style:(0,b.Tr)({width:n.progress+"%"})},null,4)])])):(0,c.Q3)("",!0)}var Si={props:["progress"],methods:{round:function(t){return(+t).toFixed(2)}}};const _i=(0,y.A)(Si,[["render",Ei]]);var Ai=_i,Xi={components:{progressBar:Ai,spinner:Pe},computed:{data:function(){return tt().find(this.$store.state.imports,{id:this.$route.params.id})},initialized:function(){if(this.data&&this.latest.isValid())return!0},latest:function(){if(this.data)return this.mom(this.data.latest)},fromEndMs:function(){if(this.data)return this.to.diff(this.latest)},fromEnd:function(){return this.latest?humanizeDuration(this.fromEndMs):"LOADING"},from:function(){if(this.data)return this.mom(this.data.from)},to:function(){if(this.data)return this.mom(this.data.to)},timespan:function(){if(this.data)return this.to.diff(this.from)},progress:function(){if(this.data){var t=this.timespan-this.fromEndMs;return 100*t/this.timespan}}},methods:{fmt:function(t){return t.format("YYYY-MM-DD HH:mm:ss")},mom:function(t){return moment.utc(t)}}};const Ti=(0,y.A)(Xi,[["render",bi]]);var Fi=Ti,Pi={class:"contain"},zi=(0,c.Lk)("h2",null,"Config",-1),Qi=(0,c.Lk)("div",{class:"hr"},null,-1),Wi=(0,c.Lk)("h3",null,"Available API keys",-1),Mi={key:0},Gi=(0,c.Lk)("em",null,"You don't have any API keys yet.",-1),$i=[Gi],Di=["onClick"],Ii=(0,c.Lk)("div",{class:"hr"},null,-1),Ki=(0,c.Lk)("div",{class:"hr"},null,-1);function Ui(t,e,n,r,a,i){var o=(0,c.g2)("apiConfigBuilder");return(0,c.uX)(),(0,c.CE)("div",Pi,[zi,Qi,Wi,i.apiKeySets.length?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("p",Mi,$i)),(0,c.Lk)("ul",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.apiKeySets,(function(t){return(0,c.uX)(),(0,c.CE)("li",null,[(0,c.eW)((0,b.v_)(t)+" (",1),(0,c.Lk)("a",{href:"#",onClick:(0,zt.D$)((function(e){return i.removeApiKey(t)}),["prevent"])},"remove",8,Di),(0,c.eW)(")")])})),256))]),t.addApiToggle?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("a",{key:1,class:"btn--primary",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.openAddApi&&i.openAddApi.apply(i,arguments)}),["prevent"]))},"Add an API key")),t.addApiToggle?((0,c.uX)(),(0,c.CE)(c.FK,{key:2},[Ii,(0,c.bF)(o)],64)):(0,c.Q3)("",!0),Ki])}var Ri={class:"grd contain"},Yi=(0,c.Lk)("h3",null,"Add an API key",-1),Hi=(0,c.Lk)("p",null,"Make sure that the API key has the permissions to create and cancel orders and view balances.",-1),Oi={class:"grd-row"},Ni={class:"grd-row-col-3-6 mx1"},Vi=(0,c.Lk)("h3",null,"Exchange",-1),ji={class:"grd-row-col-3-6 mx1"},Bi=(0,c.Lk)("h3",null,"Credentials",-1),qi=["onUpdate:modelValue"],Ji={class:"txt--center"};function Zi(t,e,n,r,a,i){var o=(0,c.g2)("exchange-picker");return(0,c.uX)(),(0,c.CE)("div",Ri,[Yi,Hi,(0,c.Lk)("div",Oi,[(0,c.Lk)("div",Ni,[Vi,(0,c.bF)(o,{onExchange:i.updateExchange,"only-tradable":"true"},null,8,["onExchange"])]),(0,c.Lk)("div",ji,[Bi,((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.requires,(function(e){return(0,c.uX)(),(0,c.CE)(c.FK,null,[(0,c.Lk)("label",null,(0,b.v_)(e),1),(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":function(n){return t.credentials[e]=n}},null,8,qi),[[zt.Jo,t.credentials[e]]])],64)})),256))])]),(0,c.Lk)("div",Ji,[(0,c.Lk)("a",{class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.upload&&i.upload.apply(i,arguments)}),["prevent"]))},"Add")])])}n(4423),n(1699);var to=function(t){return(0,c.Qi)("data-v-de7d2e52"),t=t(),(0,c.jt)(),t},eo={class:"mx1"},no=to((function(){return(0,c.Lk)("label",{class:"wrapper",for:"exchange"},"Exchange:",-1)})),ro={class:"custom-select button"};function ao(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",null,[(0,c.Lk)("div",eo,[no,(0,c.Lk)("div",ro,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.exchange=e})},[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.exchanges,(function(t,e){return(0,c.uX)(),(0,c.CE)("option",{key:e},(0,b.v_)(e),1)})),128))],512),[[zt.u1,t.exchange]])])])])}var io={props:["onlyTradable","onlyImportable"],data:function(){return{exchange:"poloniex"}},created:function(){this.emitExchange()},computed:{exchanges:function(){var t=Object.assign({},this.$store.state.exchanges);return!tt().isEmpty(t)&&(this.onlyTradable&&tt().each(t,(function(e,n){e.tradable||delete t[n]})),this.onlyImportable&&tt().each(t,(function(e,n){e.importable||delete t[n]})),t)}},watch:{exchanges:function(){this.emitExchange()},exchange:function(){this.emitExchange()}},methods:{emitExchange:function(){this.$emit("exchange",this.exchange)}}};const oo=(0,y.A)(io,[["render",ao],["__scopeId","data-v-de7d2e52"]]);var so=oo,co={data:function(){return{exchange:!1,credentials:{}}},components:{exchangePicker:so},computed:{apiKeySets:function(){return this.$store.state.apiKeys},exchanges:function(){return this.$store.state.exchanges},requires:function(){return this.exchanges&&this.exchange?this.exchanges[this.exchange].requires:[]},config:function(){var t={exchange:this.exchange,values:this.credentials};return t}},watch:{credentials:function(){this.emitConfig()}},methods:{updateExchange:function(t){this.credentials={},this.exchange=t,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)},upload:function(){var t=this,e=this.config.exchange;this.exchanges&&this.apiKeySets.includes(e)&&!confirm("You already have API keys for ".concat(e," defined, do you want to overwrite them?"))||we("addApiKey",this.config,(function(e,n){if(e)return alert(e);t.credentials={}}))}}};const uo=(0,y.A)(co,[["render",Zi]]);var lo=uo,ho={components:{apiConfigBuilder:lo},data:function(){return{addApiToggle:!1}},methods:{openAddApi:function(){this.addApiToggle=!0},removeApiKey:function(t){confirm("Are you sure you want to delete these API keys?")&&we("removeApiKey",{exchange:t},(function(t,e){if(t)return alert(t)}))}},computed:{apiKeySets:function(){return this.$store.state.apiKeys}},watch:{apiKeySets:function(){this.addApiToggle=!1}}};const fo=(0,y.A)(ho,[["render",Ui]]);var ko=fo,po={class:"contain py2"},mo=(0,c.Lk)("h3",null,"Market watchers",-1),go={key:0,class:"text"},vo=(0,c.Lk)("p",null,"You don't have any market watchers.",-1),yo=[vo],Lo={key:1,class:"full clickable"},wo=(0,c.Lk)("thead",null,[(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"exchange"),(0,c.Lk)("th",null,"currency"),(0,c.Lk)("th",null,"asset"),(0,c.Lk)("th",null,"status"),(0,c.Lk)("th",null,"started at"),(0,c.Lk)("th",null,"last update"),(0,c.Lk)("th",null,"duration")])],-1),bo=["onClick"],Co=(0,c.Lk)("h3",null,"Strat runners",-1),xo={key:2,class:"text"},Eo=(0,c.Lk)("p",null,"You don't have any stratrunners.",-1),So=[Eo],_o={key:3,class:"full"},Ao=(0,c.Lk)("thead",null,[(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"exchange"),(0,c.Lk)("th",null,"currency"),(0,c.Lk)("th",null,"asset"),(0,c.Lk)("th",null,"status"),(0,c.Lk)("th",null,"duration"),(0,c.Lk)("th",null,"strategy"),(0,c.Lk)("th",null,"PnL"),(0,c.Lk)("th",null,"type"),(0,c.Lk)("th",null,"trades")])],-1),Xo=["onClick"],To=(0,c.Lk)("div",{class:"hr"},null,-1),Fo=(0,c.Lk)("h2",null,"Start a new live Gekko",-1);function Po(t,e,n,r,a,i){var o=(0,c.g2)("router-link");return(0,c.uX)(),(0,c.CE)("div",po,[mo,i.watchers.length?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",go,yo)),i.watchers.length?((0,c.uX)(),(0,c.CE)("table",Lo,[wo,(0,c.Lk)("tbody",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.watchers,(function(e){return(0,c.uX)(),(0,c.CE)("tr",{class:"clickable",onClick:function(n){return t.$router.push({path:"/live-gekkos/".concat(e.id)})}},[(0,c.Lk)("td",null,(0,b.v_)(e.config.watch.exchange),1),(0,c.Lk)("td",null,(0,b.v_)(e.config.watch.currency),1),(0,c.Lk)("td",null,(0,b.v_)(e.config.watch.asset),1),(0,c.Lk)("td",null,(0,b.v_)(i.status(e)),1),(0,c.Lk)("td",null,[e.events.initial.candle?((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.eW)((0,b.v_)(i.fmt(e.events.initial.candle.start)),1)],64)):(0,c.Q3)("",!0)]),(0,c.Lk)("td",null,[e.events.latest.candle?((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.eW)((0,b.v_)(i.fmt(e.events.latest.candle.start)),1)],64)):(0,c.Q3)("",!0)]),(0,c.Lk)("td",null,[e.events.initial.candle&&e.events.latest.candle?((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.eW)((0,b.v_)(i.timespan(e.events.latest.candle.start,e.events.initial.candle.start)),1)],64)):(0,c.Q3)("",!0)])],8,bo)})),256))])])):(0,c.Q3)("",!0),Co,i.stratrunners.length?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",xo,So)),i.stratrunners.length?((0,c.uX)(),(0,c.CE)("table",_o,[Ao,(0,c.Lk)("tbody",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.stratrunners,(function(e){return(0,c.uX)(),(0,c.CE)("tr",{class:"clickable",onClick:function(n){return t.$router.push({path:"/live-gekkos/".concat(e.id)})}},[(0,c.Lk)("td",null,(0,b.v_)(e.config.watch.exchange),1),(0,c.Lk)("td",null,(0,b.v_)(e.config.watch.currency),1),(0,c.Lk)("td",null,(0,b.v_)(e.config.watch.asset),1),(0,c.Lk)("td",null,(0,b.v_)(i.status(e)),1),(0,c.Lk)("td",null,[e.events.initial.candle&&e.events.latest.candle?((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.eW)((0,b.v_)(i.timespan(e.events.latest.candle.start,e.events.initial.candle.start)),1)],64)):(0,c.Q3)("",!0)]),(0,c.Lk)("td",null,(0,b.v_)(e.config.tradingAdvisor.method),1),(0,c.Lk)("td",null,[i.report(e)?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.eW)("0")],64)),i.report(e)?((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[(0,c.eW)((0,b.v_)(i.round(i.report(e).profit))+" "+(0,b.v_)(i.report(e).currency),1)],64)):(0,c.Q3)("",!0)]),(0,c.Lk)("td",null,(0,b.v_)(e.logType),1),(0,c.Lk)("td",null,[e.events.tradeCompleted?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[(0,c.eW)("0")],64)),e.events.tradeCompleted?((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[(0,c.eW)((0,b.v_)(e.events.tradeCompleted.length),1)],64)):(0,c.Q3)("",!0)])],8,Xo)})),256))])])):(0,c.Q3)("",!0),To,Fo,(0,c.bF)(o,{class:"btn--primary",to:"/live-gekkos/new"},{default:(0,c.k6)((function(){return[(0,c.eW)("Start a new live Gekko!")]})),_:1})])}n(8781);var zo={created:function(){var t=this;this.timer=setInterval((function(){t.now=moment()}),1e3)},destroyed:function(){clearTimeout(this.timer)},data:function(){return{timer:!1,now:moment()}},computed:{stratrunners:function(){return _.values(this.$store.state.gekkos).concat(_.values(this.$store.state.archivedGekkos)).filter((function(t){return"papertrader"===t.logType||"tradebot"===t.logType}))},watchers:function(){return _.values(this.$store.state.gekkos).concat(_.values(this.$store.state.archivedGekkos)).filter((function(t){return"watcher"===t.logType}))}},methods:{humanizeDuration:function(t){return window.humanizeDuration(t)},moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment.utc(t)})),fmt:function(t){return moment.utc(t).format("YYYY-MM-DD HH:mm")},round:function(t){return(+t).toFixed(3)},timespan:function(t,e){return this.humanizeDuration(this.moment(t).diff(this.moment(e)))},status:function(t){return t.errored?"errored":t.stopped?"stopped":t.active?"running":void console.log("unknown state:",t)},report:function(t){return _.get(t,"events.latest.performanceReport")}}};const Qo=(0,y.A)(zo,[["render",Po]]);var Wo=Qo,Mo={class:"contain my2"},Go=(0,c.Lk)("h3",null,"Start a new gekko",-1),$o=(0,c.Lk)("div",{class:"hr"},null,-1),Do={key:0,class:"txt--center"};function Io(t,e,n,r,a,i){var o=(0,c.g2)("gekko-config-builder"),s=(0,c.g2)("spinner");return(0,c.uX)(),(0,c.CE)("div",Mo,[Go,(0,c.bF)(o,{onConfig:i.updateConfig},null,8,["onConfig"]),$o,t.config.valid?((0,c.uX)(),(0,c.CE)("div",Do,[t.pendingStratrunner?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("a",{key:0,class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,zt.D$)((function(){return i.start&&i.start.apply(i,arguments)}),["prevent"]))},"Start")),t.pendingStratrunner?((0,c.uX)(),(0,c.Wv)(s,{key:1})):(0,c.Q3)("",!0)])):(0,c.Q3)("",!0)])}var Ko={class:"grd contain"},Uo={class:"grd-row"},Ro={class:"grd-row-col-3-6 mx1"},Yo=(0,c.Lk)("h3",null,"Market",-1),Ho={class:"grd-row-col-3-6 mx1"},Oo=(0,c.Lk)("div",{class:"hr"},null,-1),No={key:0,class:"hr"};function Vo(t,e,n,r,a,i){var o=(0,c.g2)("market-picker"),s=(0,c.g2)("type-picker"),u=(0,c.g2)("strat-picker"),l=(0,c.g2)("paper-trader");return(0,c.uX)(),(0,c.CE)("div",Ko,[(0,c.Lk)("div",Uo,[(0,c.Lk)("div",Ro,[Yo,(0,c.bF)(o,{onMarket:i.updateMarketConfig,"only-tradable":i.isTradebot},null,8,["onMarket","only-tradable"])]),(0,c.Lk)("div",Ho,[(0,c.bF)(s,{onType:i.updateType},null,8,["onType"])])]),"market watcher"!==t.type?((0,c.uX)(),(0,c.CE)(c.FK,{key:0},[Oo,(0,c.bF)(u,{class:"contain my2",onStratConfig:i.updateStrat},null,8,["onStratConfig"]),"paper trader"===t.type?((0,c.uX)(),(0,c.CE)("div",No)):(0,c.Q3)("",!0),"paper trader"===t.type?((0,c.uX)(),(0,c.Wv)(l,{key:1,onSettings:i.updatePaperTrader},null,8,["onSettings"])):(0,c.Q3)("",!0)],64)):(0,c.Q3)("",!0)])}var jo=(0,c.Lk)("h3",null,"Type",-1),Bo=(0,c.Lk)("label",{class:"wrapper",for:"type"},"What do you want to do with gekko?",-1),qo={class:"radio grd"},Jo={class:"grd-row m1"},Zo=["value"],ts=["for"];function es(t,e,n,r,a,i){return(0,c.uX)(),(0,c.CE)("div",null,[jo,(0,c.Lk)("template",null,[Bo,(0,c.Lk)("form",qo,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.types,(function(n,r){return(0,c.uX)(),(0,c.CE)("div",Jo,[(0,c.bo)((0,c.Lk)("input",{class:"grd-row-col-1-6",type:"radio",value:r,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.selectedTypeIndex=e})},null,8,Zo),[[zt.XL,t.selectedTypeIndex]]),(0,c.Lk)("label",{class:"grd-row-col-5-6",for:r},(0,b.v_)(n),9,ts)])})),256))])])])}var ns={created:function(){this.emitType()},data:function(){return{types:["paper trader","market watcher","tradebot"],selectedTypeIndex:0}},methods:{emitType:function(){this.$emit("type",this.type)}},watch:{type:function(){this.emitType()}},computed:{type:function(){return this.types[this.selectedTypeIndex]}}};const rs=(0,y.A)(ns,[["render",es]]);var as=rs,is={created:function(){var t=this;be("configPart/candleWriter",(function(e,n){t.candleWriter=toml.parse(n.part)})),be("configPart/performanceAnalyzer",(function(e,n){t.performanceAnalyzer=toml.parse(n.part),t.performanceAnalyzer.enabled=!0}))},data:function(){return{market:{},range:{},type:"",strat:{},paperTrader:{},candleWriter:{},performanceAnalyzer:{}}},components:{marketPicker:Ia,typePicker:as,stratPicker:cn,paperTrader:gn},computed:{isTradebot:function(){return"tradebot"===this.type},config:function(){var t={};return Object.assign(t,this.market,this.strat,{paperTrader:this.paperTrader},{candleWriter:this.candleWriter},{type:this.type},{performanceAnalyzer:this.performanceAnalyzer}),this.isTradebot&&(delete t.paperTrader,t.trader={enabled:!0}),t.valid=this.validConfig(t),t}},methods:{validConfig:function(t){if("market watcher"===t.type)return!0;if(!t.tradingAdvisor)return!1;if(tt().isNaN(t.tradingAdvisor.candleSize))return!1;if(0==t.tradingAdvisor.candleSize)return!1;var e=t.tradingAdvisor.method;return!tt().isEmpty(t[e])},updateMarketConfig:function(t){this.market=t,this.emitConfig()},updateType:function(t){this.type=t,this.emitConfig()},updateStrat:function(t){this.strat=t,this.emitConfig()},updatePaperTrader:function(t){this.paperTrader=t,this.paperTrader.enabled=!0,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)}}};const os=(0,y.A)(is,[["render",Vo]]);var ss=os,cs={components:{gekkoConfigBuilder:ss,spinner:Pe},data:function(){return{pendingStratrunner:!1,config:{}}},computed:{gekkos:function(){return this.$store.state.gekkos},watchConfig:function(){var t=tt().pick(this.config,"watch","candleWriter"),e=s["default"].util.extend({},t);return e.type="market watcher",e.mode="realtime",e},requiredHistoricalData:function(){if(this.config.tradingAdvisor&&this.config.valid){var t=this.config.tradingAdvisor;return t.candleSize*t.historySize}},gekkoConfig:function(){var t;if(this.existingMarketWatcher){if(this.requiredHistoricalData){var e=moment().utc().startOf("minute").subtract(this.requiredHistoricalData,"minutes").unix(),n=moment.utc(this.existingMarketWatcher.events.initial.candle.start).unix();t=moment.unix(Math.max(e,n)).utc().format()}else t=moment().utc().startOf("minute").format();var r=s["default"].util.extend({market:{type:"leech",from:t},mode:"realtime"},this.config);return r}},existingMarketWatcher:function(){var t=s["default"].util.extend({},this.watchConfig.watch);return tt().find(this.gekkos,{config:{watch:t}})},exchange:function(){return this.watchConfig.watch.exchange},existingTradebot:function(){var t=this;return tt().find(this.gekkos,(function(e){return"tradebot"===e.logType&&e.config.watch.exchange===t.exchange}))},availableApiKeys:function(){return this.$store.state.apiKeys}},watch:{existingMarketWatcher:function(t,e){var n=this;if(this.pendingStratrunner){var r=this.existingMarketWatcher;r.events.latest.candle&&(this.pendingStratrunner=!1,this.startGekko((function(t,e){n.$router.push({path:"/live-gekkos/".concat(e.id)})})))}}},methods:{updateConfig:function(t){this.config=t},start:function(){var t=this;if("tradebot"===this.config.type){if(this.existingTradebot){var e="You already have a tradebot running on this exchange";return e+=", you can only run one tradebot per exchange.",alert(e)}if(!this.availableApiKeys.includes(this.exchange))return alert("Please first configure API keys for this exchange in the config page.")}"market watcher"===this.config.type?this.existingMarketWatcher?(alert("This market is already being watched, redirecting you now..."),this.$router.push({path:"/live-gekkos/".concat(this.existingMarketWatcher.id)})):this.startWatcher((function(e,n){t.$router.push({path:"/live-gekkos/".concat(n.id)})})):this.existingMarketWatcher?this.startGekko(this.routeToGekko):this.startWatcher((function(e,n){t.pendingStratrunner=n.id}))},routeToGekko:function(t,e){if(t||e.error)return console.error(t,e.error);this.$router.push({path:"/live-gekkos/".concat(e.id)})},startWatcher:function(t){we("startGekko",this.watchConfig,t)},startGekko:function(t){we("startGekko",this.gekkoConfig,t)}}};const us=(0,y.A)(cs,[["render",Io]]);var ls=us,ds=(n(5440),{class:"my2"}),hs={key:0,class:"contain"},fs=(0,c.Lk)("h1",null,"Unknown Gekko instance",-1),ks=(0,c.Lk)("p",null,"Gekko doesn't know what gekko this is...",-1),ps=[fs,ks],ms={key:1},gs={class:"contain"},vs={key:0,class:"contain brdr--mid-gray p1 bg--orange"},ys={key:1,class:"contain brdr--mid-gray p1 bg--orange"},Ls={class:"grd contain"},ws={class:"grd-row"},bs={class:"grd-row-col-3-6"},Cs=(0,c.Lk)("h3",null,"Market",-1),xs={class:"grd-row"},Es=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Exchange",-1),Ss={class:"grd-row-col-3-6"},_s={class:"grd-row"},As=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Currency",-1),Xs={class:"grd-row-col-3-6"},Ts={class:"grd-row"},Fs=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Asset",-1),Ps={class:"grd-row-col-3-6"},zs={class:"grd-row"},Qs=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Type",-1),Ws={class:"grd-row-col-3-6"},Ms={class:"grd-row-col-3-6"},Gs=(0,c.Lk)("h3",null,"Runtime",-1),$s={key:0,class:"grd-row"},Ds=(0,c.Lk)("div",{class:"grd-row-col-2-6"},"Watching since",-1),Is={class:"grd-row-col-4-6"},Ks={key:1,class:"grd-row"},Us=(0,c.Lk)("div",{class:"grd-row-col-2-6"},"Received data until",-1),Rs={class:"grd-row-col-4-6"},Ys={key:2,class:"grd-row"},Hs=(0,c.Lk)("div",{class:"grd-row-col-2-6"},"Data spanning",-1),Os={class:"grd-row-col-4-6"},Ns={class:"grd-row"},Vs=(0,c.Lk)("div",{class:"grd-row-col-2-6"},"Amount of trades",-1),js={class:"grd-row-col-4-6"},Bs={class:"grd-row"},qs=(0,c.Lk)("div",{class:"grd-row-col-2-6"},"Candle size",-1),Js={class:"grd-row-col-4-6"},Zs={class:"grd-row"},tc=(0,c.Lk)("div",{class:"grd-row-col-2-6"},"History size",-1),ec={class:"grd-row-col-4-6"},nc={key:0,class:"contain brdr--mid-gray p1 bg--orange"},rc={key:1,class:"grd-row"},ac={class:"grd-row-col-3-6"},ic=(0,c.Lk)("h3",null,"Strategy",-1),oc={class:"grd-row"},sc=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Name",-1),cc={class:"grd-row-col-3-6"},uc={class:"grd-row-col-3-6"},lc=(0,c.Lk)("h3",null,"Profit report",-1),dc={key:0},hc={key:0},fc={key:1},kc={class:"grd-row"},pc=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Start balance",-1),mc={class:"grd-row-col-3-6"},gc={class:"grd-row"},vc=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Current balance",-1),yc={class:"grd-row-col-3-6"},Lc={class:"grd-row"},wc=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Market",-1),bc={class:"grd-row-col-3-6"},Cc={class:"grd-row"},xc=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Profit",-1),Ec={class:"grd-row-col-3-6"},Sc={class:"grd-row"},_c=(0,c.Lk)("div",{class:"grd-row-col-3-6"},"Alpha",-1),Ac={class:"grd-row-col-3-6"},Xc={key:2},Tc=(0,c.Lk)("a",{href:"https://github.com/askmike/gekko/issues"},"here",-1),Fc={key:3},Pc={key:4},zc={key:5},Qc=(0,c.Lk)("h3",{class:"contain"},"Market graph",-1);function Wc(t,e,n,r,a,i){var o=(0,c.g2)("spinner"),s=(0,c.g2)("router-link"),u=(0,c.g2)("chart"),l=(0,c.g2)("roundtrips");return(0,c.uX)(),(0,c.CE)("div",ds,[i.data?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",hs,ps)),i.data?((0,c.uX)(),(0,c.CE)("div",ms,[(0,c.Lk)("h2",gs,"Gekko "+(0,b.v_)(i.type),1),i.isArchived?((0,c.uX)(),(0,c.CE)("div",vs,"This is an archived Gekko, it is currently not running anymore.")):(0,c.Q3)("",!0),i.data.errorMessage?((0,c.uX)(),(0,c.CE)("div",ys,"This is Gekko crashed with the following error: "+(0,b.v_)(i.data.errorMessage),1)):(0,c.Q3)("",!0),(0,c.Lk)("div",Ls,[(0,c.Lk)("div",ws,[(0,c.Lk)("div",bs,[Cs,(0,c.Lk)("div",xs,[Es,(0,c.Lk)("div",Ss,(0,b.v_)(i.config.watch.exchange),1)]),(0,c.Lk)("div",_s,[As,(0,c.Lk)("div",Xs,(0,b.v_)(i.config.watch.currency),1)]),(0,c.Lk)("div",Ts,[Fs,(0,c.Lk)("div",Ps,(0,b.v_)(i.config.watch.asset),1)]),(0,c.Lk)("div",zs,[Qs,(0,c.Lk)("div",Ws,(0,b.v_)(i.type),1)])]),(0,c.Lk)("div",Ms,[Gs,i.isLoading?((0,c.uX)(),(0,c.Wv)(o,{key:0})):(0,c.Q3)("",!0),i.isLoading?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[i.initialEvents.candle?((0,c.uX)(),(0,c.CE)("div",$s,[Ds,(0,c.Lk)("div",Is,(0,b.v_)(i.fmt(i.initialEvents.candle.start)),1)])):(0,c.Q3)("",!0),i.latestEvents.candle?((0,c.uX)(),(0,c.CE)("div",Ks,[Us,(0,c.Lk)("div",Rs,(0,b.v_)(i.fmt(i.latestEvents.candle.start)),1)])):(0,c.Q3)("",!0),i.latestEvents.candle?((0,c.uX)(),(0,c.CE)("div",Ys,[Hs,(0,c.Lk)("div",Os,(0,b.v_)(i.humanizeDuration(i.moment(i.latestEvents.candle.start).diff(i.moment(i.initialEvents.candle.start)))),1)])):(0,c.Q3)("",!0),i.isStratrunner?((0,c.uX)(),(0,c.CE)(c.FK,{key:3},[(0,c.Lk)("div",Ns,[Vs,(0,c.Lk)("div",js,(0,b.v_)(i.trades.length),1)]),(0,c.Lk)("div",Bs,[qs,(0,c.Lk)("div",Js,(0,b.v_)(i.config.tradingAdvisor.candleSize),1)]),(0,c.Lk)("div",Zs,[tc,(0,c.Lk)("div",ec,(0,b.v_)(i.config.tradingAdvisor.historySize),1)])],64)):(0,c.Q3)("",!0)],64))])]),i.warmupRemaining?((0,c.uX)(),(0,c.CE)("div",nc,[(0,c.eW)("This stratrunner is still warming up for the next "),(0,c.Lk)("i",null,(0,b.v_)(i.warmupRemaining.replace(","," and ")),1),(0,c.eW)(", it will not trade until it is warmed up.")])):(0,c.Q3)("",!0),i.isStratrunner?((0,c.uX)(),(0,c.CE)("div",rc,[(0,c.Lk)("div",ac,[ic,(0,c.Lk)("div",oc,[sc,(0,c.Lk)("div",cc,[(0,c.Lk)("strong",null,(0,b.v_)(i.stratName),1)])]),(0,c.eW)("Parameters"),(0,c.Lk)("pre",null,(0,b.v_)(i.stratParams),1)]),(0,c.Lk)("div",uc,[lc,i.report?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("p",dc,[i.isArchived?((0,c.uX)(),(0,c.CE)("em",hc,"This Gekko never executed a trade..")):(0,c.Q3)("",!0),i.isArchived?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("em",fc,"Waiting for at least one trade.."))])),i.report?((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[(0,c.Lk)("div",kc,[pc,(0,c.Lk)("div",mc,(0,b.v_)(i.round(i.report.startBalance)),1)]),(0,c.Lk)("div",gc,[vc,(0,c.Lk)("div",yc,(0,b.v_)(i.round(i.report.balance)),1)]),(0,c.Lk)("div",Lc,[wc,(0,c.Lk)("div",bc,(0,b.v_)(i.round(i.report.market/100*i.report.startPrice))+" "+(0,b.v_)(i.config.watch.currency)+" ("+(0,b.v_)(i.round(i.report.market))+" %)",1)]),(0,c.Lk)("div",Cc,[xc,(0,c.Lk)("div",Ec,(0,b.v_)(i.round(i.report.profit))+" "+(0,b.v_)(i.config.watch.currency)+" ("+(0,b.v_)(i.round(i.report.relativeProfit))+" %)",1)]),(0,c.Lk)("div",Sc,[_c,(0,c.Lk)("div",Ac,(0,b.v_)(i.round(i.report.alpha))+" "+(0,b.v_)(i.config.watch.currency),1)])],64)):(0,c.Q3)("",!0)])])):(0,c.Q3)("",!0),!i.isStratrunner||i.watcher||i.isArchived?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("p",Xc,[(0,c.eW)("WARNING: stale gekko, not attached to a watcher, please report "),Tc,(0,c.eW)(".")])),i.isArchived?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("p",Fc,[(0,c.Lk)("a",{class:"w100--s my1 btn--red",onClick:e[0]||(e[0]=function(){return i.stopGekko&&i.stopGekko.apply(i,arguments)})},"Stop Gekko")])),i.isArchived?((0,c.uX)(),(0,c.CE)("p",Pc,[(0,c.Lk)("a",{class:"w100--s my1 btn--red",onClick:e[1]||(e[1]=function(){return i.deleteGekko&&i.deleteGekko.apply(i,arguments)})},"Delete Gekko")])):(0,c.Q3)("",!0),i.isStratrunner&&i.watcher&&!i.isArchived?((0,c.uX)(),(0,c.CE)("p",zc,[(0,c.Lk)("em",null,[(0,c.eW)("This gekko gets market data from "),(0,c.bF)(s,{to:"/live-gekkos/"+i.watcher.id},{default:(0,c.k6)((function(){return[(0,c.eW)("this market watcher")]})),_:1},8,["to"])]),(0,c.eW)(".")])):(0,c.Q3)("",!0)]),i.isLoading?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)(c.FK,{key:2},[Qc,"fetching"===t.candleFetch?((0,c.uX)(),(0,c.Wv)(o,{key:0})):(0,c.Q3)("",!0),"fetched"===t.candleFetch?((0,c.uX)(),(0,c.Wv)(u,{key:1,data:i.chartData,height:300},null,8,["data"])):(0,c.Q3)("",!0),i.isStratrunner?((0,c.uX)(),(0,c.Wv)(l,{key:2,roundtrips:i.roundtrips},null,8,["roundtrips"])):(0,c.Q3)("",!0)],64))])):(0,c.Q3)("",!0)])}n(3110);var Mc={created:function(){this.isLoading||this.getCandles()},components:{spinner:Pe,chart:ir,paperTradeSummary:Nn,roundtrips:Lr},data:function(){return{candleFetch:"idle",candles:!1}},computed:{id:function(){return this.$route.params.id},gekkos:function(){return this.$store.state.gekkos},archivedGekkos:function(){return this.$store.state.archivedGekkos},data:function(){return!!this.gekkos&&(tt().has(this.gekkos,this.id)?this.gekkos[this.id]:!!tt().has(this.archivedGekkos,this.id)&&this.archivedGekkos[this.id])},config:function(){return tt().get(this,"data.config")},latestEvents:function(){return tt().get(this,"data.events.latest")},initialEvents:function(){return tt().get(this,"data.events.initial")},trades:function(){return tt().get(this,"data.events.tradeCompleted")||[]},roundtrips:function(){return tt().get(this,"data.events.roundtrip")||[]},isLive:function(){return tt().has(this.gekkos,this.id)},type:function(){return this.data.logType},isStratrunner:function(){return"watcher"!==this.type},isArchived:function(){return this.data.stopped},warmupRemaining:function(){if(!this.isStratrunner)return!1;if(this.isArchived)return!1;if(this.initialEvents.stratWarmupCompleted)return!1;if(!this.initialEvents.candle)return!1;var t=tt().get(this.config,"tradingAdvisor.historySize");if(!t)return!1;var e=tt().get(this.config,"tradingAdvisor.candleSize")*t;return humanizeDuration(moment(this.initialEvents.candle.start).add(e,"m").diff(moment()),{largest:2})},chartData:function(){return{candles:this.candles,trades:this.trades}},report:function(){return tt().get(this.latestEvents,"performanceReport")},stratName:function(){if(this.data)return this.data.config.tradingAdvisor.method},stratParams:function(){if(!this.data)return"Loading...";var t=s["default"].util.extend({},this.data.config[this.stratName]);return delete t.__empty,tt().isEmpty(t)?"No parameters":JSON.stringify(t,null,4)},isLoading:function(){return!this.data||(!tt().get(this.data,"events.initial.candle")||!tt().get(this.data,"events.latest.candle"))},watcher:function(){var t=this;if(!this.isStratrunner)return!1;var e=s["default"].util.extend({},this.data.config.watch);return tt().find(this.gekkos,(function(n){return n.id!==t.id&&tt().isEqual(e,n.config.watch)}))},hasLeechers:function(){var t=this;if(this.isStratrunner)return!1;var e=s["default"].util.extend({},this.data.config.watch);return tt().find(this.gekkos,(function(n){return n.id!==t.id&&tt().isEqual(e,n.config.watch)}))}},watch:{"data.events.latest.candle.start":function(){setTimeout(this.getCandles,tt().random(100,2e3))}},methods:{round:function(t){return(+t).toFixed(5)},humanizeDuration:function(t,e){return window.humanizeDuration(t,e)},moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment.utc(t)})),fmt:function(t){return moment.utc(t).format("YYYY-MM-DD HH:mm")},getCandles:function(){var t=this;if(!this.isLoading&&"fetching"!==this.candleFetch){this.candleFetch="fetching";var e=this.data.events.latest.candle.start,n=this.data.events.initial.candle.start,r=1;"watcher"!==this.type&&(r=this.data.config.tradingAdvisor.candleSize);var a={watch:this.data.config.watch,daterange:{to:e,from:n},candleSize:r};setTimeout((function(){we("getCandles",a,(function(e,n){if(t.candleFetch="fetched",!n||n.error||!tt().isArray(n))return console.log(n);t.candles=n.map((function(t){return t.start=moment.unix(t.start).utc().format(),t}))}))}),tt().random(150,2500))}},stopGekko:function(){if(this.hasLeechers)return alert("This Gekko is fetching market data for multiple stratrunners, stop these first.");confirm("Are you sure you want to stop this Gekko?")&&we("stopGekko",{id:this.data.id},(function(t,e){console.log("stopped gekko")}))},deleteGekko:function(){var t=this;if(!this.isArchived)return alert("This Gekko is still running, stop it first!");confirm("Are you sure you want to delete this Gekko?")&&we("deleteGekko",{id:this.data.id},(function(e,n){t.$router.push({path:"/live-gekkos/"})}))}}};const Gc=(0,y.A)(Mc,[["render",Wc]]);var $c=Gc,Dc=function(){be("imports",(function(t,e){Pt.commit("syncImports",e)}))},Ic=function(){tu.$on("import_update",(function(t){Pt.commit("updateImport",t)}))};function Kc(){Dc(),Ic()}var Uc=function(){be("gekkos",(function(t,e){var n=e;Pt.commit("syncGekkos",n)}))},Rc=function(){tu.$on("gekko_new",(function(t){return Pt.commit("addGekko",t.state)})),tu.$on("gekko_event",(function(t){return Pt.commit("updateGekko",t)})),tu.$on("gekko_archived",(function(t){return Pt.commit("archiveGekko",t.id)})),tu.$on("gekko_error",(function(t){return Pt.commit("errorGekko",t)})),tu.$on("gekko_deleted",(function(t){return Pt.commit("deleteGekko",t.id)}))};function Yc(){Uc(),Rc()}var Hc=function(){},Oc=function(){tu.$on("WS_STATUS_CHANGE",(function(t){return Pt.commit("setGlobalWarning",{key:"connected",value:t.connected})}))};function Nc(){Hc(),Oc()}var Vc=function(t){if(!t)return{};var e=t,n={};return e.forEach((function(t){n[t.slug]=n[t.slug]||{markets:{}},t.markets.forEach((function(e){var r=(0,Zn.A)(e["pair"],2),a=r[0],i=r[1];n[t.slug].markets[a]=n[t.slug].markets[a]||[],n[t.slug].markets[a].push(i)})),"exchangeMaxHistoryAge"in t&&(n[t.slug].exchangeMaxHistoryAge=t.exchangeMaxHistoryAge),n[t.slug].importable=!!t.providesFullHistory,n[t.slug].tradable=!!t.tradable,n[t.slug].requires=t.requires})),n},jc=function(){be("apiKeys",(function(t,e){Pt.commit("syncApiKeys",e)})),be("exchanges",(function(t,e){Pt.commit("syncExchanges",Vc(e))}))},Bc=function(){tu.$on("apiKeys",(function(t){Pt.commit("syncApiKeys",t.exchanges)}))};function qc(){jc(),Bc()}function Jc(){Kc(),Yc(),Nc(),qc()}var Zc=null,tu=new s["default"];tu.$on("gekko_update",(function(t){return console.log(t)})),tu.$on("import_update",(function(t){return console.log(t)})),tu.$on("import_error",(function(t){alert("IMPORT ERROR: "+t.error)}));var eu={connected:!1},nu=function(){Zc=new ReconnectingWebSocket(fe,null,{maxReconnectInterval:4e3}),setTimeout((function(){eu.connected||(Jc(),tu.$emit("WS_STATUS_CHANGE",eu))}),500),Zc.onopen=function(){eu.connected||(eu.connected=!0,tu.$emit("WS_STATUS_CHANGE",eu),Jc())},Zc.onclose=function(){eu.connected&&(eu.connected=!1,tu.$emit("WS_STATUS_CHANGE",eu))},Zc.onerror=function(){eu.connected&&(eu.connected=!1,tu.$emit("WS_STATUS_CHANGE",eu))},Zc.onmessage=function(t){var e=JSON.parse(t.data);tu.$emit(e.type,e)}},ru="/";s["default"].use(q["default"]);var au=new q["default"]({mode:"hash",base:ru,routes:[{path:"/",redirect:"/home"},{path:"/home",component:Qr},{path:"/backtest",component:Sr},{path:"/config",component:ko},{path:"/data",component:ea},{path:"/data/importer",component:Na},{path:"/data/importer/import/:id",component:Fi},{path:"/live-gekkos",component:Wo},{path:"/live-gekkos/new",component:ls},{path:"/live-gekkos/:id",component:$c}]});nu(),new s["default"]({router:au,store:Pt,el:"#app",render:function(t){return t(B)}})},2634:function(){}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,i){if(!r){var o=1/0;for(l=0;l<t.length;l++){r=t[l][0],a=t[l][1],i=t[l][2];for(var s=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(s=!1,i<o&&(o=i));if(s){t.splice(l--,1);var u=a();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,i,o=r[0],s=r[1],c=r[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var l=c(n)}for(e&&e(r);u<o.length;u++)i=o[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self["webpackChunkgekko_vue_ui"]=self["webpackChunkgekko_vue_ui"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(5532)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.e8451a6d.js.map