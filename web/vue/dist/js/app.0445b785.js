(function(){var t={5532:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,{addImport:function(){return et},syncImports:function(){return nt},updateImport:function(){return rt}});var a={};n.r(a),n.d(a,{addGekko:function(){return ut},archiveGekko:function(){return kt},deleteGekko:function(){return mt},errorGekko:function(){return pt},syncGekkos:function(){return dt},updateGekko:function(){return ht}});var s={};n.r(s),n.d(s,{setGlobalWarning:function(){return gt}});var i={};n.r(i),n.d(i,{syncApiKeys:function(){return ft},syncExchanges:function(){return vt}});var o=n(8756),l=n(641);const c={id:"app"},d={class:"fill"};function u(t,e,n,r,a,s){const i=(0,l.g2)("top"),o=(0,l.g2)("router-view"),u=(0,l.g2)("bottom"),h=(0,l.g2)("modal");return(0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(i),(0,l.Lk)("div",d,[(0,l.bF)(o,{class:"view"})]),(0,l.bF)(u),(0,l.bF)(h)])}const h=(0,l.Lk)("div",{id:"top"},null,-1),k=(0,l.Lk)("header",{class:"bg--off-white grd"},[(0,l.Lk)("div",{class:"contain grd-row"},[(0,l.Lk)("h3",{class:"py1 px2 col-2"},"Gekko UI")])],-1),p={class:"bg--light-gray"},m={class:"menu contain"},g=(0,l.Lk)("a",{class:"py1",href:"https://gekko.wizb.it/docs/introduction/about_gekko.html",target:"_blank"},"Documentation",-1);function f(t,e,n,r,a,s){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",null,[h,k,(0,l.Lk)("nav",p,[(0,l.Lk)("div",m,[(0,l.bF)(i,{class:"py1",to:"/home"},{default:(0,l.k6)((()=>[(0,l.eW)("Home")])),_:1}),(0,l.bF)(i,{class:"py1",to:"/live-gekkos"},{default:(0,l.k6)((()=>[(0,l.eW)("Live Gekkos")])),_:1}),(0,l.bF)(i,{class:"py1",to:"/backtest"},{default:(0,l.k6)((()=>[(0,l.eW)("Backtest")])),_:1}),(0,l.bF)(i,{class:"py1",to:"/data"},{default:(0,l.k6)((()=>[(0,l.eW)("Local data")])),_:1}),(0,l.bF)(i,{class:"py1",to:"/config"},{default:(0,l.k6)((()=>[(0,l.eW)("Config")])),_:1}),g])])])}var v={},y=n(6262);const L=(0,y.A)(v,[["render",f]]);var w=L,b=n(33);const C={class:"p2 bg--off-white"},x={class:"contain"},E=(0,l.Lk)("p",null,[(0,l.Lk)("em",null,"Use Gekko at your own risk.")],-1);function S(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("footer",C,[(0,l.Lk)("div",x,[E,(0,l.Lk)("p",null,"Using Gekko v"+(0,b.v_)(t.version.gekko)+" and Gekko UI v"+(0,b.v_)(t.version.ui)+".",1)])])}var X=JSON.parse('{"name":"gekko-vue-ui","version":"0.2.3","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build"},"dependencies":{"marked":"^12.0.2","npm-check-updates":"^16.14.20","superagent":"^9.0.2","superagent-no-cache":"github:uditalias/superagent-no-cache","vue":"^3.4.27","vue-router":"^4.3.2","vuex":"^4.1.0"},"devDependencies":{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-service":"^5.0.8","babel-plugin-transform-commonjs-es2015-modules":"^4.0.1","copy-webpack-plugin":"^12.0.2","pug":"^3.0.3","pug-plain-loader":"^1.1.0","vue-template-compiler":"^2.7.16"},"postcss":{"plugins":{"autoprefixer":{}}},"browserslist":["> 1%","last 2 versions","not ie <= 8"]}'),A=JSON.parse('{"name":"gekko","version":"0.6.8","description":"A bitcoin trading bot for auto trading at various exchanges","keywords":["trading","bot","bitcoin","TA","finance"],"scripts":{"test":"./node_modules/.bin/mocha test/*.js --recursive test -u tdd --reporter spec","start":"node ./gekko --config config.js --ui"},"author":"Mike van Rossum <mike@mvr.me>","dependencies":{"@koa/cors":"^5.0.0","async":"3.2.5","bitfinex-api-node":"^6.0.0","co-fs":"^1.2.0","commander":"^12.1.0","gekko":"0.0.9","humanize-duration":"^3.32.1","koa":"^2.15.3","koa-bodyparser":"^4.4.1","koa-cors":"0.0.16","koa-logger":"^3.2.1","koa-router":"^12.0.1","koa-static":"^5.0.0","lodash":"4.x","moment":"^2.30.1","opn":"^5.5.0","promisify-node":"^0.5.0","prompt-lite":"0.1.1","relieve":"^2.2.3","retry":"^0.13.1","semver":"7.6.2","sqlite3":"^5.1.7","stats-lite":"^2.2.0","tiny-promisify":"^1.0.0","toml":"^3.0.0","ws":"^8.17.0"},"devDependencies":{"chai":"^5.1.1","mocha":"^10.4.0","proxyquire":"^2.1.3","request":"^2.83.0","request-promise":"^4.2.2","sinon":"^18.0.0"},"engines":{"node":">=18.0.0"},"license":"MIT","repository":{"type":"git","url":"https://github.com/askmike/gekko.git"}}');const T=A,F=X;var P={data:()=>({version:{gekko:T.version,ui:F.version}})};const z=(0,y.A)(P,[["render",S]]);var $=z;const Q={key:0},W=(0,l.Lk)("div",{id:"modal-background"},null,-1),M={class:"modal",id:"modal"},G=["innerHTML"];function D(t,e,n,r,a,s){return s.active?((0,l.uX)(),(0,l.CE)("div",Q,[W,(0,l.Lk)("div",M,[(0,l.Lk)("div",{class:"modal-guts",innerHTML:s.content},null,8,G)])])):(0,l.Q3)("",!0)}var I=n(23);const K=I["default"];var U=new K.Renderer;U.link=function(t,e,n){var r,a,s;return r=/^https?:\/\/.+$/.test(t),a=r||"newWindow"===e,s='<a href="'+t+'"',a&&(s+=' target="_blank"'),e&&"newWindow"!==e&&(s+=' title="'+e+'"'),s+">"+n+"</a>"},K.setOptions({renderer:U});var R=K;const Y={disconnected:R("\n\n## Disconnected\n\nSomething happened to either Gekko or the connection.\nPlease check the terminal where Gekko is running or\nyour network connection.\n\n*This message is shown when the UI is unable to open a websocket connection with the Gekko Server.*\n\n  ")};var H={computed:{active:function(){return!this.$store.state.warnings.connected},content:function(){return this.$store.state.warnings.connected?"":Y.disconnected}}};const O=(0,y.A)(H,[["render",D]]);var N=O,V={name:"app",components:{top:w,bottom:$,modal:N}};const j=(0,y.A)(V,[["render",u]]);var B=j,q=n(5220),J=n(6278),Z=n(2543),tt=n.n(Z);n(4114);const et=(t,e)=>(t.imports.push(e),t),nt=(t,e)=>(t.imports=e,t),rt=(t,e)=>{let n=t.imports.findIndex((t=>t.id===e.import_id)),r=t.imports[n];if(!r)return t;let a=o["default"].util.extend(r,e.updates);return o["default"].set(t.imports,n,a),t},at=["marketUpdate"],st=["marketStart","stratWarmupCompleted"],it=["tradeCompleted","advice","roundtrip"],ot=(t,e)=>{const n=e.type,r=e.payload;return t={...t,latestUpdate:new Date},it.includes(n)&&(t=t.events[n]?{...t,events:{...t.events,[n]:[...t.events[n],r]}}:{...t,events:{...t.events,[n]:[r]}}),t.events.initial[n]||at.includes(n)||(t={...t,events:{...t.events,initial:{...t.events.initial,[n]:r}}}),st.includes(n)||(t={...t,events:{...t.events,latest:{...t.events.latest,[n]:r}}}),t};var lt=ot;const ct=lt,dt=(t,e)=>e?(t.gekkos=e.live,t.archivedGekkos=e.archive,t):t,ut=(t,e)=>(t.gekkos={...t.gekkos,[e.id]:e},t),ht=(t,e)=>e.id&&tt().has(t.gekkos,e.id)?(t.gekkos={...t.gekkos,[e.id]:ct(t.gekkos[e.id],e.event)},t):console.error("cannot update unknown gekko.."),kt=(t,e)=>tt().has(t.gekkos,e)?(t.archivedGekkos={...t.archivedGekkos,[e]:{...t.gekkos[e],stopped:!0,active:!1}},t.gekkos=tt().omit(t.gekkos,e),t):console.error("cannot archive unknown gekko.."),pt=(t,e)=>tt().has(t.gekkos,e.id)?(t.gekkos={...t.gekkos,[e.id]:{...t.gekkos[e.id],errored:!0,errorMessage:e.error}},t):console.error("cannot error unknown gekko.."),mt=(t,e)=>tt().has(t.archivedGekkos,e)?(t.archivedGekkos=tt().omit(t.archivedGekkos,e),t):console.error("cannot delete unknown gekko.."),gt=(t,e)=>(t.warnings[e.key]=e.value,t),ft=(t,e)=>(o["default"].set(t,"apiKeys",e),t),vt=(t,e)=>(o["default"].set(t,"exchanges",e),t);o["default"].use(J.Ay);const yt=!1;let Lt={};tt().merge(Lt,r),tt().merge(Lt,a),tt().merge(Lt,s),tt().merge(Lt,i);var wt=new J.Ay.Store({state:{warnings:{connected:!0},imports:[],gekkos:{},archivedGekkos:{},connection:{disconnected:!1,reconnected:!1},apiKeys:[],exchanges:{}},mutations:Lt,strict:yt}),bt=n(3751);const Ct=(0,l.Lk)("h2",{class:"contain"},"Backtest",-1),xt=(0,l.Lk)("div",{class:"hr"},null,-1),Et={key:0},_t={class:"txt--center"},St={key:1,class:"scan-btn"},Xt=(0,l.Lk)("p",null,"Running backtest..",-1);function At(t,e,n,r,a,s){const i=(0,l.g2)("config-builder"),o=(0,l.g2)("spinner"),c=(0,l.g2)("result");return(0,l.uX)(),(0,l.CE)("div",null,[Ct,xt,(0,l.bF)(i,{onConfig:s.check},null,8,["onConfig"]),t.backtestable?((0,l.uX)(),(0,l.CE)("div",Et,[(0,l.Lk)("div",_t,["fetching"!==t.backtestState?((0,l.uX)(),(0,l.CE)("a",{key:0,class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.run&&s.run(...t)),["prevent"]))},"Backtest")):(0,l.Q3)("",!0),"fetching"===t.backtestState?((0,l.uX)(),(0,l.CE)("div",St,[Xt,(0,l.bF)(o)])):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0),t.backtestResult&&"fetched"===t.backtestState?((0,l.uX)(),(0,l.Wv)(c,{key:1,result:t.backtestResult},null,8,["result"])):(0,l.Q3)("",!0)])}const Tt=(0,l.Lk)("div",{class:"hr"},null,-1),Ft=(0,l.Lk)("div",{class:"hr"},null,-1),Pt=(0,l.Lk)("div",{class:"hr"},null,-1);function zt(t,e,n,r,a,s){const i=(0,l.g2)("dataset-picker"),o=(0,l.g2)("strat-picker"),c=(0,l.g2)("paper-trader");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(i,{class:"my2 contain",onDataset:s.updateDataset},null,8,["onDataset"]),Tt,(0,l.bF)(o,{class:"my2 contain",onStratConfig:s.updateStrat},null,8,["onStratConfig"]),Ft,(0,l.bF)(c,{class:"contain",onSettings:s.updatePaperTrader},null,8,["onSettings"]),Pt])}const $t=(0,l.Lk)("h3",null,"Select a dataset",-1),Qt={key:0,class:"txt--center my2"},Wt={key:1,class:"txt--center my2"},Mt={key:2,class:"my2"},Gt={key:0},Dt={class:"full"},It=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th"),(0,l.Lk)("th",null,"exchange"),(0,l.Lk)("th",null,"currency"),(0,l.Lk)("th",null,"asset"),(0,l.Lk)("th",null,"from"),(0,l.Lk)("th",null,"to"),(0,l.Lk)("th",null,"duration")])],-1),Kt={class:"radio"},Ut=["value","id"],Rt=["for"],Yt=["for"],Ht=["for"],Ot=["for"],Nt=["for"],Vt=["for"],jt=(0,l.Lk)("label",{for:"customFrom"},"From:",-1),Bt=(0,l.Lk)("label",{for:"customTo"},"To:",-1),qt={key:1},Jt=(0,l.Lk)("a",{href:"#/data/importer"},"Lets add some",-1);function Zt(t,e,n,r,a,s){const i=(0,l.g2)("spinner");return(0,l.uX)(),(0,l.CE)("div",null,[$t,"idle"===t.datasetScanstate?((0,l.uX)(),(0,l.CE)("div",Qt,[(0,l.Lk)("a",{class:"w100--s btn--primary scan-btn",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...e)=>t.scan&&t.scan(...e)),["prevent"]))},"Scan available data")])):(0,l.Q3)("",!0),"scanning"===t.datasetScanstate?((0,l.uX)(),(0,l.CE)("div",Wt,[(0,l.bF)(i)])):(0,l.Q3)("",!0),"scanned"===t.datasetScanstate?((0,l.uX)(),(0,l.CE)("div",Mt,[0!=t.datasets.length?((0,l.uX)(),(0,l.CE)("div",Gt,[(0,l.Lk)("table",Dt,[It,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.datasets,((n,r)=>((0,l.uX)(),(0,l.CE)("tr",null,[(0,l.Lk)("td",Kt,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"dataset",value:r,"onUpdate:modelValue":e[1]||(e[1]=e=>t.setIndex=e),id:n.id},null,8,Ut),[[bt.XL,t.setIndex]])]),(0,l.Lk)("td",null,[(0,l.Lk)("label",{for:n.id},(0,b.v_)(n.exchange),9,Rt)]),(0,l.Lk)("td",null,[(0,l.Lk)("label",{for:n.id},(0,b.v_)(n.currency),9,Yt)]),(0,l.Lk)("td",null,[(0,l.Lk)("label",{for:n.id},(0,b.v_)(n.asset),9,Ht)]),(0,l.Lk)("td",null,[(0,l.Lk)("label",{for:n.id},(0,b.v_)(s.fmt(n.from)),9,Ot)]),(0,l.Lk)("td",null,[(0,l.Lk)("label",{for:n.id},(0,b.v_)(s.fmt(n.to)),9,Nt)]),(0,l.Lk)("td",null,[(0,l.Lk)("label",{for:n.id},(0,b.v_)(s.humanizeDuration(n.to.diff(n.from))),9,Vt)])])))),256))])]),t.rangeVisible?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("a",{key:0,class:"btn--primary",href:"#",onClick:e[2]||(e[2]=(0,bt.D$)(((...t)=>s.openRange&&s.openRange(...t)),["prevent"]))},"Adjust range")),t.rangeVisible?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",null,[jt,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.customFrom=e)},null,512),[[bt.Jo,t.customFrom]])]),(0,l.Lk)("div",null,[Bt,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.customTo=e)},null,512),[[bt.Jo,t.customTo]])])],64)):(0,l.Q3)("",!0)])):((0,l.uX)(),(0,l.CE)("em",qt,[(0,l.eW)("No Data found "),Jt]))])):(0,l.Q3)("",!0)])}var te=n(5734),ee=n.n(te),ne=n(1084),re=n.n(ne);const ae=window.CONFIG.ui,se=`${ae.host}${80===ae.port?"":`:${ae.port}`}${ae.path}`;let ie,oe,le;ie=ae.ssl?`https://${se}`:`http://${se}`,oe=ie+"api/",le=ae.ssl?`wss://${se}api`:`ws://${se}api`;const ce=t=>(e,n)=>{if(e)return t(e);if(!n.text)return t("no data");let r=JSON.parse(n.text);t(!1,r)},de=(t,e,n)=>{ee().post(oe+t).use(re()).send(e).end(ce(n))},ue=(t,e)=>{ee().get(oe+t).use(re()).end(ce(e))},he={class:"spinner"},ke=(0,l.Lk)("div",{class:"rect1"},null,-1),pe=(0,l.Lk)("div",{class:"rect2"},null,-1),me=(0,l.Lk)("div",{class:"rect3"},null,-1),ge=(0,l.Lk)("div",{class:"rect4"},null,-1),fe=[ke,pe,me,ge];function ve(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",he,fe)}var ye={};const Le=(0,y.A)(ye,[["render",ve]]);var we=Le,be={data:()=>({datasets:[],datasetScanstate:"idle",unscannableMakets:[]}),methods:{scan:function(){this.datasetScanstate="scanning",de("scansets",{},((t,e)=>{this.datasetScanstate="scanned",this.unscannableMakets=e.errors;let n=[];e.datasets.forEach((t=>{t.ranges.forEach(((e,r)=>{n.push({exchange:t.exchange,currency:t.currency,asset:t.asset,from:moment.unix(e.from).utc(),to:moment.unix(e.to).utc(),id:t.exchange+t.asset+t.currency+r})}))})),n=n.filter((t=>{if(t.to.diff(t.from,"hours")>2)return!0})),n=n.sort(((t,e)=>{let n=t.to.diff(t.from),r=e.to.diff(e.from);return n<r?-1:n>r?1:0})).reverse(),this.datasets=n}))}}},Ce=be,xe={components:{spinner:we},data:()=>({setIndex:-1,customTo:!1,customFrom:!1,rangeVisible:!1,set:!1}),mixins:[Ce],methods:{humanizeDuration:t=>window.humanizeDuration(t,{largest:4}),fmt:t=>t.utc().format("YYYY-MM-DD HH:mm"),openRange:function(){if(-1===this.setIndex)return alert("Select a dataset to adjust range");this.updateCustomRange(),this.rangeVisible=!0},updateCustomRange:function(){this.customTo=this.fmt(this.set.to),this.customFrom=this.fmt(this.set.from)},emitSet:function(t){if(!t)return;let e;this.customTo?(e=o["default"].util.extend({},t),e.to=moment.utc(this.customTo,"YYYY-MM-DD HH:mm").format(),e.from=moment.utc(this.customFrom,"YYYY-MM-DD HH:mm").format()):e=t,this.$emit("dataset",e)}},watch:{setIndex:function(){this.set=this.datasets[this.setIndex],this.updateCustomRange(),this.emitSet(this.set)},customTo:function(){this.emitSet(this.set)},customFrom:function(){this.emitSet(this.set)}}};const Ee=(0,y.A)(xe,[["render",Zt]]);var _e=Ee;const Se={class:"grd"},Xe={class:"grd-row"},Ae={class:"grd-row-col-3-6 px1"},Te=(0,l.Lk)("h3",null,"Strategy",-1),Fe=(0,l.Lk)("label",{class:"wrapper",for:"strat"},"Strategy:",-1),Pe={class:"custom-select button"},ze=(0,l.Lk)("label",{for:"candleSize"},"Candle Size",-1),$e={class:"grd-row"},Qe={class:"grd-row-col-3-6"},We={class:"grd-row-col-3-6 align"},Me={class:"custom-select button"},Ge=(0,l.Lk)("option",null,"minutes",-1),De=(0,l.Lk)("option",null,"hours",-1),Ie=(0,l.Lk)("option",null,"days",-1),Ke=[Ge,De,Ie],Ue={for:"historySize"},Re={class:"label-like"},Ye={class:"grd-row-col-3-6 px1"},He=(0,l.Lk)("h3",null,"Parameters",-1),Oe={key:0,class:"bg--red p1"};function Ne(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",Se,[(0,l.Lk)("div",Xe,[(0,l.Lk)("div",Ae,[Te,(0,l.Lk)("div",null,[Fe,(0,l.Lk)("div",Pe,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.strategy=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.strategies,(t=>((0,l.uX)(),(0,l.CE)("option",null,(0,b.v_)(t.name),1)))),256))],512),[[bt.u1,t.strategy]])])]),(0,l.Lk)("div",null,[ze,(0,l.Lk)("div",$e,[(0,l.Lk)("div",Qe,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.rawCandleSize=e)},null,512),[[bt.Jo,t.rawCandleSize]])]),(0,l.Lk)("div",We,[(0,l.Lk)("div",Me,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.candleSizeUnit=e)},Ke,512),[[bt.u1,t.candleSizeUnit]])])])])]),(0,l.Lk)("div",null,[(0,l.Lk)("label",Ue,"Warmup period (in "+(0,b.v_)(t.rawCandleSize)+" "+(0,b.v_)(s.singularCandleSizeUnit)+" candles):",1),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.historySize=e)},null,512),[[bt.Jo,t.historySize]]),(0,l.Lk)("em",Re,"(will use "+(0,b.v_)(s.humanizeDuration(s.candleSize*t.historySize*1e3*60))+" of data as history)",1)])]),(0,l.Lk)("div",Ye,[(0,l.Lk)("div",null,[He,(0,l.Lk)("p",null,(0,b.v_)(t.strategy)+" Parameters:",1),(0,l.bo)((0,l.Lk)("textarea",{class:"params","onUpdate:modelValue":e[4]||(e[4]=e=>t.rawStratParams=e)},null,512),[[bt.Jo,t.rawStratParams]]),t.rawStratParamsError?((0,l.uX)(),(0,l.CE)("p",Oe,(0,b.v_)(t.rawStratParamsError.message),1)):(0,l.Q3)("",!0)])])])])}var Ve={data:()=>({strategies:[],candleSizeUnit:"hours",rawCandleSize:1,strategy:"MACD",historySize:10,rawStratParams:"",rawStratParamsError:!1,emptyStrat:!1,stratParams:{}}),created:function(){ue("strategies",((t,e)=>{this.strategies=e,tt().each(this.strategies,(function(t){t.empty=""===t.params})),this.rawStratParams=tt().find(this.strategies,{name:this.strategy}).params,this.emptyStrat=tt().find(this.strategies,{name:this.strategy}).empty,this.emitConfig()}))},watch:{strategy:function(t){t=tt().find(this.strategies,{name:t}),this.rawStratParams=t.params,this.emptyStrat=t.empty,this.emitConfig()},candleSize:function(){this.emitConfig()},historySize:function(){this.emitConfig()},rawStratParams:function(){this.emitConfig()}},computed:{candleSize:function(){return"minutes"===this.candleSizeUnit?this.rawCandleSize:"hours"===this.candleSizeUnit?60*this.rawCandleSize:"days"===this.candleSizeUnit?60*this.rawCandleSize*24:void 0},singularCandleSizeUnit:function(){return this.candleSizeUnit.slice(0,-1)},config:function(){let t={tradingAdvisor:{enabled:!0,method:this.strategy,candleSize:+this.candleSize,historySize:+this.historySize}};return this.emptyStrat?t[this.strategy]={__empty:!0}:t[this.strategy]=this.stratParams,t}},methods:{humanizeDuration:t=>window.humanizeDuration(t),emitConfig:function(){this.parseParams(),this.$emit("stratConfig",this.config)},parseParams:function(){try{this.stratParams=toml.parse(this.rawStratParams),this.rawStratParamsError=!1}catch(t){this.rawStratParamsError=t,this.stratParams={}}}}};const je=(0,y.A)(Ve,[["render",Ne]]);var Be=je;const qe={class:"grd"},Je={class:"px1"},Ze=(0,l.Lk)("h3",null,"Paper trader",-1),tn=(0,l.Lk)("p",null,"Settings:",-1),en={key:0,class:"bg--red p1"};function nn(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",qe,[(0,l.Lk)("div",Je,[Ze,"closed"===t.toggle?((0,l.uX)(),(0,l.CE)("a",{key:0,class:"btn--primary",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.switchToggle&&s.switchToggle(...t)),["prevent"]))},"Change paper trader settings")):(0,l.Q3)("",!0),"open"===t.toggle?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[tn,(0,l.bo)((0,l.Lk)("textarea",{class:"params","onUpdate:modelValue":e[1]||(e[1]=e=>t.rawPaperTraderParams=e)},null,512),[[bt.Jo,t.rawPaperTraderParams]]),t.rawPaperTraderParamsError?((0,l.uX)(),(0,l.CE)("p",en,(0,b.v_)(t.rawPaperTraderParamsError.message),1)):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0)])])}var rn={created:function(){ue("configPart/paperTrader",((t,e)=>{this.rawPaperTraderParams=e.part}))},data:()=>({rawPaperTraderParams:"",rawPaperTraderParamsError:!1,paperTraderParams:{},toggle:"closed"}),watch:{rawPaperTraderParams:function(){this.emitConfig()}},methods:{switchToggle:function(){"open"===this.toggle?this.toggle="closed":this.toggle="open"},emitConfig:function(){this.parseParams(),this.$emit("settings",this.paperTraderParams)},parseParams:function(){try{this.paperTraderParams=toml.parse(this.rawPaperTraderParams),this.paperTraderParams.reportRoundtrips=!0,this.rawPaperTraderParamsError=!1}catch(t){this.rawPaperTraderParamsError=t,this.paperTraderParams={}}}}};const an=(0,y.A)(rn,[["render",nn]]);var sn=an,on={created:function(){ue("configPart/performanceAnalyzer",((t,e)=>{this.performanceAnalyzer=toml.parse(e.part),this.performanceAnalyzer.enabled=!0}))},data:()=>({dataset:{},strat:{},paperTrader:{},performanceAnalyzer:{}}),components:{stratPicker:Be,datasetPicker:_e,paperTrader:sn},computed:{market:function(){return this.dataset.exchange?{exchange:this.dataset.exchange,currency:this.dataset.currency,asset:this.dataset.asset}:{}},range:function(){return this.dataset.exchange?{from:this.dataset.from,to:this.dataset.to}:{}},config:function(){let t={};return Object.assign(t,{watch:this.market},{paperTrader:this.paperTrader},this.strat,{backtest:{daterange:this.range},backtestResultExporter:{enabled:!0,writeToDisk:!1,data:{stratUpdates:!1,roundtrips:!0,stratCandles:!0,stratCandleProps:["open"],trades:!0}}},{performanceAnalyzer:this.performanceAnalyzer}),t.valid=this.validConfig(t),t.backtestResultExporter.enabled=!0,t}},methods:{validConfig:function(t){if(!t.backtest)return!1;if(!t.backtest.daterange)return!1;if(tt().isEmpty(t.backtest.daterange))return!1;if(!t.watch)return!1;if(!t.tradingAdvisor)return!1;let e=t.tradingAdvisor.method;if(tt().isEmpty(t[e]))return!1;if(t.tradingAdvisor){if(tt().isNaN(t.tradingAdvisor.candleSize))return!1;if(0==t.tradingAdvisor.candleSize)return!1}return!0},updateDataset:function(t){this.dataset=t,this.$emit("config",this.config)},updateStrat:function(t){this.strat=t,this.$emit("config",this.config)},updatePaperTrader:function(t){this.paperTrader=t,this.paperTrader.enabled=!0,this.$emit("config",this.config)}}};const ln=(0,y.A)(on,[["render",zt]]);var cn=ln;const dn=(0,l.Lk)("div",{class:"hr contain"},null,-1),un=(0,l.Lk)("div",{class:"contain"},[(0,l.Lk)("h3",null,"Backtest result")],-1),hn=(0,l.Lk)("div",{class:"hr contain"},null,-1),kn=(0,l.Lk)("div",{class:"hr contain"},null,-1);function pn(t,e,n,r,a,s){const i=(0,l.g2)("result-summary"),o=(0,l.g2)("chart"),c=(0,l.g2)("roundtripTable");return(0,l.uX)(),(0,l.CE)("div",null,[dn,un,(0,l.bF)(i,{report:n.result.performanceReport},null,8,["report"]),hn,(0,l.bF)(o,{data:s.candles,height:"500"},null,8,["data"]),kn,(0,l.bF)(c,{roundtrips:n.result.roundtrips},null,8,["roundtrips"])])}const mn={class:"contain"},gn={class:"grd-row summary"},fn={class:"grd-row-col-3-6"},vn={class:"p1"},yn=(0,l.Lk)("th",null,"start time",-1),Ln=(0,l.Lk)("th",null,"end time",-1),wn=(0,l.Lk)("th",null,"timespan",-1),bn=(0,l.Lk)("th",null,"start price",-1),Cn=(0,l.Lk)("th",null,"end price",-1),xn=(0,l.Lk)("th",null,"market",-1);function En(t,e,n,r,a,s){const i=(0,l.g2)("paperTradeSummary");return(0,l.uX)(),(0,l.CE)("div",mn,[(0,l.Lk)("div",gn,[(0,l.Lk)("div",fn,[(0,l.Lk)("table",vn,[(0,l.Lk)("tr",null,[yn,(0,l.Lk)("td",null,(0,b.v_)(n.report.startTime),1)]),(0,l.Lk)("tr",null,[Ln,(0,l.Lk)("td",null,(0,b.v_)(n.report.endTime),1)]),(0,l.Lk)("tr",null,[wn,(0,l.Lk)("td",null,(0,b.v_)(n.report.timespan),1)]),(0,l.Lk)("tr",null,[bn,(0,l.Lk)("td",null,(0,b.v_)(s.round(n.report.startPrice))+" "+(0,b.v_)(n.report.currency),1)]),(0,l.Lk)("tr",null,[Cn,(0,l.Lk)("td",null,(0,b.v_)(s.round(n.report.endPrice))+" "+(0,b.v_)(n.report.currency),1)]),(0,l.Lk)("tr",null,[xn,(0,l.Lk)("td",null,(0,b.v_)(s.round(n.report.market))+"%",1)])])]),(0,l.bF)(i,{report:n.report},null,8,["report"])])])}const _n={class:"grd-row-col-3-6"},Sn={class:"p1"},Xn=(0,l.Lk)("th",null,"amount of trades",-1),An=(0,l.Lk)("th",null,"sharpe ratio",-1),Tn=(0,l.Lk)("th",null,"start balance",-1),Fn=(0,l.Lk)("th",null,"final balance",-1),Pn=(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"simulated profit")],-1);function zn(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",_n,[(0,l.Lk)("table",Sn,[(0,l.Lk)("tr",null,[Xn,(0,l.Lk)("td",null,(0,b.v_)(n.report.trades),1)]),(0,l.Lk)("tr",null,[An,(0,l.Lk)("td",null,(0,b.v_)(s.round2(n.report.sharpe)),1)]),(0,l.Lk)("tr",null,[Tn,(0,l.Lk)("td",null,(0,b.v_)(s.round(n.report.startBalance))+" "+(0,b.v_)(n.report.currency),1)]),(0,l.Lk)("tr",null,[Fn,(0,l.Lk)("td",null,(0,b.v_)(s.round(n.report.balance))+" "+(0,b.v_)(n.report.currency),1)]),Pn]),(0,l.Lk)("div",{class:(0,b.C4)(["big txt--right price",s.profitClass])},(0,b.v_)(s.round(n.report.relativeProfit))+"%",3)])}var $n={props:["report"],methods:{round2:t=>(+t).toFixed(2),round:t=>(+t).toFixed(5)},computed:{profitClass:function(){return this.report.relativeProfit>0?"profit":"loss"}}};const Qn=(0,y.A)($n,[["render",zn]]);var Wn=Qn,Mn={props:["report"],components:{paperTradeSummary:Wn},methods:{round:t=>(+t).toFixed(5)},computed:{profitClass:function(){return this.report.relativeProfit>0?"profit":"loss"}}};const Gn=(0,y.A)(Mn,[["render",En]]);var Dn=Gn;const In=["height"];function Kn(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",{id:"chartWrapper",class:(0,b.C4)({clickable:!t.isClicked})},[(0,l.Lk)("div",{class:"shield",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.click&&s.click(...t)),["prevent"]))}),((0,l.uX)(),(0,l.CE)("svg",{id:"chart",width:"960",height:n.height},null,8,In))],2)}function Un(t,e,n){const r=t=>tt().isNumber(t)?moment.unix(t).utc().toDate():moment.utc(t).toDate(),a=e.map((t=>({price:t.price,date:r(t.date),action:t.action}))),s=t.map((t=>({price:t.open,date:r(t.start)})));var i=s.map((t=>+t.date)),o=s.map((t=>+t.price)),l=d3.select("#chart");l.attr("width",window.innerWidth-20);var c={top:20,right:20,bottom:110,left:40},d=n-c.top-c.bottom,u={top:n-70,right:20,bottom:30,left:40},h=+l.attr("width")-c.left-c.right,k=n-u.top-u.bottom,p=d3.scaleUtc().range([0,h]),m=d3.scaleUtc().range([0,h]),g=d3.scaleLinear().range([d,0]),f=d3.scaleLinear().range([k,0]),v=d3.axisBottom(p),y=d3.axisBottom(m),L=d3.axisLeft(g).ticks(n/50),w=d3.brushX().extent([[0,0],[h,k]]).on("brush end",X),b=d3.zoom().scaleExtent([1,100]).translateExtent([[0,0],[h,d]]).extent([[0,0],[h,d]]).on("zoom",T),C=d3.line().x((function(t){return p(t.date)})).y((function(t){return g(t.price)})),x=d3.line().x((function(t){return m(t.date)})).y((function(t){return f(t.price)}));l.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",h).attr("height",d);var E=l.append("g").attr("class","focus").attr("transform","translate("+c.left+","+c.top+")"),_=l.append("g").attr("class","context").attr("transform","translate("+u.left+","+u.top+")");p.domain(d3.extent(s,(function(t){return t.date}))),g.domain([.99*d3.min(o),1.01*d3.max(o)]),m.domain(p.domain()),f.domain(g.domain()),E.append("path").datum(s).attr("class","line price").attr("d",C),E.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+d+")").call(v),E.append("g").attr("class","axis axis--y").call(L),_.append("path").datum(s).attr("class","line").attr("d",x),_.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+k+")").call(y);var S=l.append("g").attr("transform","translate("+c.left+","+c.top+")").selectAll("circle").data(a).enter().append("circle").attr("class",(function(t){return t.action})).attr("cx",(function(t){return p(t.date)})).attr("cy",(function(t){return g(t.price)})).attr("r",5);_.append("g").selectAll("circle").data(a).enter().append("circle").attr("class",(function(t){return t.action})).attr("cx",(function(t){return m(t.date)})).attr("cy",(function(t){return f(t.price)})).attr("r",3);function X(){if(!d3.event.sourceEvent||"zoom"!==d3.event.sourceEvent.type){var t=d3.event.selection||m.range();p.domain(t.map(m.invert,m)),A(p.domain()),l.select(".axis--y").call(L),S.attr("cx",(function(t){return p(t.date)})).attr("cy",(function(t){return g(t.price)})),E.select(".line").attr("d",C),E.select(".axis--x").call(v),l.select(".zoom").call(b.transform,d3.zoomIdentity.scale(h/(t[1]-t[0])).translate(-t[0],0))}}function A(t){let[e,n]=t,r=tt().sortedIndex(i,e),a=tt().sortedIndex(i,n),s=o.slice(r,a);g.domain([.9995*d3.min(s),1.0005*d3.max(s)])}function T(){if(!d3.event.sourceEvent||"brush"!==d3.event.sourceEvent.type){var t=d3.event.transform;A(t.rescaleX(m).domain()),l.select(".axis--y").call(L),p.domain(t.rescaleX(m).domain()),E.select(".line").attr("d",C),S.attr("cx",(function(t){return p(t.date)})).attr("cy",(function(t){return g(t.price)})),E.select(".axis--x").call(v),_.select(".brush").call(w.move,p.range().map(t.invertX,t))}}_.append("g").attr("class","brush").call(w).call(w.move,p.range()),l.append("rect").attr("class","zoom").attr("width",h).attr("height",d).attr("transform","translate("+c.left+","+c.top+")").call(b)}const Rn=function(t){d3.select("#chart").append("text").attr("class","message").attr("x",150).attr("y",150).text(t)},Yn=4;var Hn={props:["data","height"],data:function(){return{isClicked:!1}},watch:{data:function(){this.render()}},created:function(){setTimeout(this.render,100)},beforeDestroy:function(){this.remove()},methods:{click:function(){this.isClicked=!0},render:function(){this.remove(),_.size(this.data.candles)<Yn?Rn("Not enough data to spawn chart"):Un(this.data.candles,this.data.trades,this.height)},remove:function(){d3.select("#chart").html("")}}};const On=(0,y.A)(Hn,[["render",Kn]]);var Nn=On;const Vn={class:"contain roundtrips"},jn=(0,l.Lk)("h2",null,"Roundtrips",-1),Bn={key:0},qn=(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Entry at (UTC)"),(0,l.Lk)("th",null,"Exit at (UTC)"),(0,l.Lk)("th",null,"Exposure"),(0,l.Lk)("th",null,"Entry balance"),(0,l.Lk)("th",null,"Exit balance"),(0,l.Lk)("th",null,"P&L"),(0,l.Lk)("th",null,"Profit")],-1),Jn={class:"loss"},Zn={class:"loss"},tr={class:"profit"},er={class:"profit"},nr={key:1},rr=(0,l.Lk)("p",null,"Not enough data to display",-1),ar=[rr];function sr(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",Vn,[jn,n.roundtrips.length?((0,l.uX)(),(0,l.CE)("table",Bn,[(0,l.Lk)("thead",null,[qn,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.roundtrips,(t=>((0,l.uX)(),(0,l.CE)("tr",null,[(0,l.Lk)("td",null,(0,b.v_)(s.fmt(t.entryAt)),1),(0,l.Lk)("td",null,(0,b.v_)(s.fmt(t.exitAt)),1),(0,l.Lk)("td",null,(0,b.v_)(s.diff(t.duration)),1),(0,l.Lk)("td",null,(0,b.v_)(s.round(t.entryBalance)),1),(0,l.Lk)("td",null,(0,b.v_)(s.round(t.exitBalance)),1),-1===Math.sign(t.pnl)?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("td",Jn,(0,b.v_)(Math.sign(t.pnl)*t.pnl.toFixed(2)),1),(0,l.Lk)("td",Zn,(0,b.v_)(t.profit.toFixed(2))+"%",1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("td",tr,(0,b.v_)(t.pnl.toFixed(2)),1),(0,l.Lk)("td",er,(0,b.v_)(t.profit.toFixed(2))+"%",1)],64))])))),256))])])):(0,l.Q3)("",!0),n.roundtrips.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",nr,ar))])}var ir={props:["roundtrips"],data:()=>({}),methods:{diff:t=>moment.duration(t).humanize(),humanizeDuration:t=>window.humanizeDuration(t),fmt:t=>{let e;return e=tt().isNumber(t)?moment.unix(t):moment(t).utc(),e.utc().format("YYYY-MM-DD HH:mm")},round:t=>(+t).toFixed(3)}};const or=(0,y.A)(ir,[["render",sr]]);var lr=or,cr={props:["result"],data:()=>({}),methods:{},components:{roundtripTable:lr,resultSummary:Dn,chart:Nn},computed:{candles:function(){return{candles:this.result.stratCandles,trades:this.result.trades}}}};const dr=(0,y.A)(cr,[["render",pn]]);var ur=dr,hr={data:()=>({backtestable:!1,backtestState:"idle",backtestResult:!1,config:!1}),methods:{check:function(t){if(this.config=t,!t.valid)return this.backtestable=!1;this.backtestable=!0},run:function(){this.backtestState="fetching",de("backtest",this.config,((t,e)=>{this.backtestState="fetched",this.backtestResult=e}))}},components:{configBuilder:cn,result:ur,spinner:we}};const kr=(0,y.A)(hr,[["render",At]]);var pr=kr;const mr={class:"contain grd-row"},gr=["innerHTML"],fr=(0,l.Lk)("div",{class:"grd-row-col-3-6 txt--center"},[(0,l.Lk)("img",{src:"static/gekko.jpg"}),(0,l.Lk)("p",null,[(0,l.Lk)("em",null,"The most valuable commodity I know of is information.")])],-1);function vr(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("section",mr,[(0,l.Lk)("div",{class:"grd-row-col-3-6",innerHTML:t.left},null,8,gr),fr])}const yr=R("\n\n## Gekko\n\nGekko is a Bitcoin trading bot and backtesting platform that\nconnects to popular Bitcoin exchanges. It is written in javascript\nand runs on nodejs.\n\n[Find out more](https://gekko.wizb.it/).\n\n*Gekko is 100% free (open source), if you paid for this you have been scammed.*\n\n");var Lr={data:()=>({left:yr})};const wr=(0,y.A)(Lr,[["render",vr]]);var br=wr;const Cr={class:"contain"},xr=["innerHTML"],Er=(0,l.Lk)("div",{class:"hr"},null,-1),_r=(0,l.Lk)("h2",null,"Available datasets",-1),Sr={key:0,class:"txt--center my2"},Xr={key:1,class:"txt--center my2"},Ar={key:2,class:"my2"},Tr={key:0,class:"bg--orange p1 warning my1"},Fr=(0,l.Lk)("p",null,"Unable to find datasets in the following markets:",-1),Pr={class:"mx2"},zr={key:1,class:"full data"},$r=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"exchange"),(0,l.Lk)("th",null,"currency"),(0,l.Lk)("th",null,"asset"),(0,l.Lk)("th",null,"from"),(0,l.Lk)("th",null,"to"),(0,l.Lk)("th",null,"duration")])],-1),Qr={key:2},Wr={class:"my2"},Mr=(0,l.Lk)("h2",null,"Import more data",-1),Gr=(0,l.Lk)("p",{class:"text"},"You can easily import more market data directly from exchanges using the importer.",-1);function Dr(t,e,n,r,a,s){const i=(0,l.g2)("spinner"),o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Cr,[(0,l.Lk)("div",{class:"text",innerHTML:t.intro},null,8,xr),Er,_r,"idle"===t.datasetScanstate?((0,l.uX)(),(0,l.CE)("div",Sr,[(0,l.Lk)("a",{class:"w100--s btn--primary scan-btn",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...e)=>t.scan&&t.scan(...e)),["prevent"]))},"Scan available data")])):(0,l.Q3)("",!0),"scanning"===t.datasetScanstate?((0,l.uX)(),(0,l.CE)("div",Xr,[(0,l.bF)(i)])):(0,l.Q3)("",!0),"scanned"===t.datasetScanstate?((0,l.uX)(),(0,l.CE)("div",Ar,[t.unscannableMakets.length?((0,l.uX)(),(0,l.CE)("div",Tr,[t.viewUnscannable?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",{key:0,class:"clickable",onClick:e[1]||(e[1]=(0,bt.D$)(((...t)=>s.toggleUnscannable&&s.toggleUnscannable(...t)),["prevent"]))},"Some markets were unscannable, click here for details.")),t.viewUnscannable?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[Fr,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.unscannableMakets,(t=>((0,l.uX)(),(0,l.CE)("div",Pr,"- "+(0,b.v_)(t.exchange)+":"+(0,b.v_)(t.currency)+":"+(0,b.v_)(t.asset),1)))),256))],64)):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),t.datasets.length?((0,l.uX)(),(0,l.CE)("table",zr,[$r,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.datasets,(t=>((0,l.uX)(),(0,l.CE)("tr",null,[(0,l.Lk)("td",null,(0,b.v_)(t.exchange),1),(0,l.Lk)("td",null,(0,b.v_)(t.currency),1),(0,l.Lk)("td",null,(0,b.v_)(t.asset),1),(0,l.Lk)("td",null,(0,b.v_)(s.fmt(t.from)),1),(0,l.Lk)("td",null,(0,b.v_)(s.fmt(t.to)),1),(0,l.Lk)("td",null,(0,b.v_)(s.humanizeDuration(t.to.diff(t.from))),1)])))),256))])])):(0,l.Q3)("",!0),t.datasets.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",Qr,"It looks like you don't have any local data yet."))])):(0,l.Q3)("",!0),(0,l.Lk)("div",Wr,[Mr,Gr,(0,l.bF)(o,{class:"btn--primary",to:"/data/importer"},{default:(0,l.k6)((()=>[(0,l.eW)("Go to the importer!")])),_:1})])])}let Ir=R("\n\n## Local data\n\nGekko needs local market data in order to backtest strategies. The local\ndata can also be used in a warmup period when running a strategy against a\nlive market.\n\n");var Kr={mixins:[Ce],components:{spinner:we},data:()=>({intro:Ir,viewUnscannable:!1}),methods:{toggleUnscannable:function(){this.viewUnscannable=!0},humanizeDuration:t=>window.humanizeDuration(t),fmt:t=>t.format("YYYY-MM-DD HH:mm")}};const Ur=(0,y.A)(Kr,[["render",Dr]]);var Rr=Ur;const Yr={class:"contain my2"},Hr=["innerHTML"],Or=(0,l.Lk)("div",{class:"hr"},null,-1),Nr=(0,l.Lk)("h3",null,"Currently running imports",-1),Vr={key:0},jr={key:1},Br=(0,l.Lk)("div",{class:"hr"},null,-1),qr=(0,l.Lk)("h3",null,"Start a new import",-1),Jr=(0,l.Lk)("div",{class:"hr"},null,-1),Zr={class:"txt--center"};function ta(t,e,n,r,a,s){const i=(0,l.g2)("router-link"),o=(0,l.g2)("import-config-builder");return(0,l.uX)(),(0,l.CE)("div",Yr,[(0,l.Lk)("div",{class:"text",innerHTML:t.intro},null,8,Hr),Or,Nr,0===s.imports.length?((0,l.uX)(),(0,l.CE)("p",Vr,"You currently don't have any imports running.")):(0,l.Q3)("",!0),s.imports.length?((0,l.uX)(),(0,l.CE)("ul",jr,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.imports,(t=>((0,l.uX)(),(0,l.CE)("li",null,[(0,l.bF)(i,{to:"/data/importer/import/"+t.id},{default:(0,l.k6)((()=>[(0,l.eW)((0,b.v_)(t.watch.exchange)+":"+(0,b.v_)(t.watch.currency)+"/"+(0,b.v_)(t.watch.asset),1)])),_:2},1032,["to"])])))),256))])):(0,l.Q3)("",!0),Br,qr,(0,l.bF)(o,{onConfig:s.updateConfig},null,8,["onConfig"]),Jr,(0,l.Lk)("div",Zr,[(0,l.Lk)("a",{class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.run&&s.run(...t)),["prevent"]))},"Import")])])}const ea={class:"grd contain"},na={class:"grd-row"},ra={class:"grd-row-col-3-6 mx1"},aa=(0,l.Lk)("h3",null,"Market",-1),sa={class:"grd-row-col-3-6 mx1"};function ia(t,e,n,r,a,s){const i=(0,l.g2)("market-picker"),o=(0,l.g2)("range-creator");return(0,l.uX)(),(0,l.CE)("div",ea,[(0,l.Lk)("div",na,[(0,l.Lk)("div",ra,[aa,(0,l.bF)(i,{onMarket:s.updateMarketConfig,"only-importable":"true"},null,8,["onMarket"])]),(0,l.Lk)("div",sa,[(0,l.bF)(o,{onRange:s.updateRange},null,8,["onRange"])])])])}const oa=t=>((0,l.Qi)("data-v-6d64edb1"),t=t(),(0,l.jt)(),t),la={class:"mx1"},ca=oa((()=>(0,l.Lk)("label",{class:"wrapper",for:"exchange"},"Exchange:",-1))),da={class:"custom-select button"},ua={class:"grd-row"},ha={class:"grd-row-col-3-6 mx1"},ka=oa((()=>(0,l.Lk)("label",{for:"currency"},"Currency:",-1))),pa={class:"custom-select button"},ma={class:"grd-row-col-3-6 mx1"},ga=oa((()=>(0,l.Lk)("label",{for:"asset"},"Asset:",-1))),fa={class:"custom-select button"};function va(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",la,[ca,(0,l.Lk)("div",da,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.exchange=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.exchanges,((t,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e},(0,b.v_)(e),1)))),128))],512),[[bt.u1,t.exchange]])])]),(0,l.Lk)("div",ua,[(0,l.Lk)("div",ha,[ka,(0,l.Lk)("div",pa,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.currency=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.currencies,(t=>((0,l.uX)(),(0,l.CE)("option",{key:t},(0,b.v_)(t),1)))),128))],512),[[bt.u1,t.currency]])])]),(0,l.Lk)("div",ma,[ga,(0,l.Lk)("div",fa,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.asset=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.assets,(t=>((0,l.uX)(),(0,l.CE)("option",{key:t},(0,b.v_)(t),1)))),128))],512),[[bt.u1,t.asset]])])])])])}const ya=(0,l.Lk)("h3",null,"Daterange",-1),La=(0,l.Lk)("label",{for:"from"},"From",-1),wa=(0,l.Lk)("label",{for:"to"},"To",-1);function ba(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",null,[ya,(0,l.Lk)("div",null,[La,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.from=e)},null,512),[[bt.Jo,t.from]])]),(0,l.Lk)("div",null,[wa,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.to=e)},null,512),[[bt.Jo,t.to]])])])}var Ca={data:function(){return{from:"",to:""}},created:function(){let t=moment().startOf("minute"),e=t.clone().subtract(3,"months");this.to=this.fmt(t),this.from=this.fmt(e),this.emitRange()},methods:{fmtTs:t=>moment.unix(t).utc(),fmt:t=>t.utc().format("YYYY-MM-DD HH:mm"),emitRange:function(){this.$emit("range",{from:this.fmtTs(this.from),to:this.fmtTs(this.to)})},emitManualEntry:function(){if(this.from.length<"4"||this.from.length<"4")return this.$emit("range",{});let t=moment.utc(this.from),e=moment.utc(this.to);t.isValid()&&e.isValid()?this.$emit("range",{from:this.fmt(t),to:this.fmt(e)}):this.$emit("range",{})}},watch:{from:function(){this.emitManualEntry()},to:function(){this.emitManualEntry()},config:function(){this.scanned=!1},tab:function(){this.scanned=!1,this.$emit("range",{})},selectedRangeIndex:function(){let t=this.ranges[this.selectedRangeIndex];t&&this.emitRange(t)}}};const xa=(0,y.A)(Ca,[["render",ba]]);var Ea=xa,_a={props:["onlyTradable","onlyImportable"],data:()=>({exchange:"poloniex",currency:"USDT",asset:"BTC"}),created:function(){this.emitConfig()},computed:{exchanges:function(){let t=Object.assign({},this.$store.state.exchanges);return!tt().isEmpty(t)&&(this.onlyTradable&&tt().each(t,((e,n)=>{e.tradable||delete t[n]})),this.onlyImportable&&tt().each(t,((e,n)=>{e.importable||delete t[n]})),t)},markets:function(){return this.exchanges?this.exchanges[this.exchange]:null},assets:function(){return this.exchanges?this.exchanges[this.exchange].markets[this.currency]:null},currencies:function(){return this.exchanges?tt().keys(this.exchanges[this.exchange].markets):null},watchConfig:function(){return{watch:{exchange:this.exchange,currency:this.currency,asset:this.asset}}}},watch:{currency:function(){this.emitConfig()},asset:function(){this.emitConfig()},market:function(){this.emitConfig()},exchanges:function(){this.emitConfig()},exchange:function(){this.emitConfig()}},methods:{emitConfig:function(){this.$emit("market",this.watchConfig)}}};const Sa=(0,y.A)(_a,[["render",va],["__scopeId","data-v-6d64edb1"]]);var Xa=Sa,Aa={data:()=>({market:{},range:{}}),components:{marketPicker:Xa,rangeCreator:Ea},computed:{config:function(){let t={};return Object.assign(t,this.market,{importer:{daterange:this.range}},{candleWriter:{enabled:!0}}),t}},methods:{updateMarketConfig:function(t){this.market=t,this.emitConfig()},updateRange:function(t){this.range=t,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)}}};const Ta=(0,y.A)(Aa,[["render",ia]]);var Fa=Ta;let Pa=R("\n\n## Import data\n\nThe importer can download historical market data directly from the exchange.\n\n");var za={components:{importConfigBuilder:Fa,spinner:we},data:()=>({intro:Pa,config:{}}),computed:{imports:function(){return this.$store.state.imports}},methods:{daysApart:function(t){let e=moment(t.to),n=moment(t.from);return e.diff(n,"days")},updateConfig:function(t){this.config=t},run:function(){let t=this.daysApart(this.config.importer.daterange);if(t<1)return alert("You can only import at least one day of data..");let e=this.$store.state.exchanges[this.config.watch.exchange];if("exchangeMaxHistoryAge"in e&&moment(this.config.importer.daterange.from)<moment().subtract(e.exchangeMaxHistoryAge,"days"))return alert("Your date from is too old for "+this.config.watch.exchange+". It supports only the last "+e.exchangeMaxHistoryAge+" days..");de("import",this.config,((t,e)=>{if(t)return alert(t);this.$store.commit("addImport",e),this.$router.push({path:`/data/importer/import/${e.id}`})}))}}};const $a=(0,y.A)(za,[["render",ta]]);var Qa=$a;const Wa={class:"contain my2"},Ma={key:0},Ga=(0,l.Lk)("h2",null,"Importing data..",-1),Da={class:"grd"},Ia={class:"grd-row"},Ka=(0,l.Lk)("div",{class:"grd-row-col-2-6"},[(0,l.Lk)("strong",null,"Market:")],-1),Ua={class:"grd-row-col-4-6"},Ra={class:"grd-row"},Ya=(0,l.Lk)("div",{class:"grd-row-col-2-6"},[(0,l.Lk)("strong",null,"Currency/Asset:")],-1),Ha={class:"grd-row-col-4-6"},Oa={class:"grd"},Na={class:"grd-row"},Va=(0,l.Lk)("div",{class:"grd-row-col-2-6"},[(0,l.Lk)("strong",null,"From:")],-1),ja={class:"grd-row-col-4-6"},Ba={class:"grd-row"},qa=(0,l.Lk)("div",{class:"grd-row-col-2-6"},[(0,l.Lk)("strong",null,"To:")],-1),Ja={class:"grd-row-col-4-6"},Za={key:0,class:"grd-row"},ts=(0,l.Lk)("div",{class:"grd-row-col-2-6"},[(0,l.Lk)("strong",null,"Imported data until:")],-1),es={class:"grd-row-col-4-6"},ns={key:1,class:"grd-row"},rs=(0,l.Lk)("div",{class:"grd-row-col-2-6"},[(0,l.Lk)("strong",null,"Remaining:")],-1),as={class:"grd-row-col-4-6"},ss={key:1,class:"contain"},is={key:1,class:"txt--center"},os=(0,l.Lk)("h2",null,"Import done",-1),ls={key:2,class:"txt--center"},cs=(0,l.Lk)("h2",null,"ERROR: Unknown import",-1);function ds(t,e,n,r,a,s){const i=(0,l.g2)("spinner"),o=(0,l.g2)("progressBar"),c=(0,l.g2)("router-link"),d=(0,l.g2)("I");return(0,l.uX)(),(0,l.CE)("div",Wa,[s.data&&!s.data.done?((0,l.uX)(),(0,l.CE)("div",Ma,[Ga,(0,l.Lk)("div",Da,[(0,l.Lk)("div",Ia,[Ka,(0,l.Lk)("div",Ua,(0,b.v_)(s.data.watch.exchange),1)]),(0,l.Lk)("div",Ra,[Ya,(0,l.Lk)("div",Ha,(0,b.v_)(s.data.watch.currency)+"/"+(0,b.v_)(s.data.watch.asset),1)])]),(0,l.Lk)("div",Oa,[(0,l.Lk)("div",Na,[Va,(0,l.Lk)("div",ja,(0,b.v_)(s.fmt(s.from)),1)]),(0,l.Lk)("div",Ba,[qa,(0,l.Lk)("div",Ja,(0,b.v_)(s.fmt(s.to)),1)]),s.initialized?((0,l.uX)(),(0,l.CE)("div",Za,[ts,(0,l.Lk)("div",es,(0,b.v_)(s.fmt(s.latest)),1)])):(0,l.Q3)("",!0),s.initialized?((0,l.uX)(),(0,l.CE)("div",ns,[rs,(0,l.Lk)("div",as,(0,b.v_)(s.fromEnd),1)])):(0,l.Q3)("",!0)]),s.initialized?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(i,{key:0})),s.initialized?((0,l.uX)(),(0,l.CE)("div",ss,[(0,l.bF)(o,{progress:s.progress},null,8,["progress"])])):(0,l.Q3)("",!0),(0,l.Lk)("p",null,[(0,l.Lk)("em",null,[(0,l.eW)("(you don't have to wait until the import is done,you can already start "),(0,l.bF)(c,{to:"/backtest"},{default:(0,l.k6)((()=>[(0,l.eW)("backtesting")])),_:1}),(0,l.eW)(").")])])])):(0,l.Q3)("",!0),s.data&&s.data.done?((0,l.uX)(),(0,l.CE)("div",is,[os,(0,l.Lk)("p",null,[(0,l.eW)(" Go and "),(0,l.bF)(c,{to:"/backtest"},{default:(0,l.k6)((()=>[(0,l.eW)("backtest")])),_:1}),(0,l.eW)(" with your new data!")])])):(0,l.Q3)("",!0),s.data?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ls,[cs,(0,l.Lk)("p",null,[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)("don't know this import..")])),_:1})])]))])}const us={key:0,class:"progressbarWrapper"},hs={class:"progressbar"};function ks(t,e,n,r,a,s){return n.progress?((0,l.uX)(),(0,l.CE)("div",us,[(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,(0,b.v_)(s.round(n.progress))+"%",1)]),(0,l.Lk)("div",hs,[(0,l.Lk)("div",{style:(0,b.Tr)({width:n.progress+"%"})},null,4)])])):(0,l.Q3)("",!0)}var ps={props:["progress"],methods:{round:t=>(+t).toFixed(2)}};const ms=(0,y.A)(ps,[["render",ks]]);var gs=ms,fs={components:{progressBar:gs,spinner:we},computed:{data:function(){return tt().find(this.$store.state.imports,{id:this.$route.params.id})},initialized:function(){if(this.data&&this.latest.isValid())return!0},latest:function(){if(this.data)return this.mom(this.data.latest)},fromEndMs:function(){if(this.data)return this.to.diff(this.latest)},fromEnd:function(){return this.latest?humanizeDuration(this.fromEndMs):"LOADING"},from:function(){if(this.data)return this.mom(this.data.from)},to:function(){if(this.data)return this.mom(this.data.to)},timespan:function(){if(this.data)return this.to.diff(this.from)},progress:function(){if(!this.data)return;const t=this.timespan-this.fromEndMs;return 100*t/this.timespan}},methods:{fmt:t=>t.format("YYYY-MM-DD HH:mm:ss"),mom:t=>moment.utc(t)}};const vs=(0,y.A)(fs,[["render",ds]]);var ys=vs;const Ls={class:"contain"},ws=(0,l.Lk)("h2",null,"Config",-1),bs=(0,l.Lk)("div",{class:"hr"},null,-1),Cs=(0,l.Lk)("h3",null,"Available API keys",-1),xs={key:0},Es=(0,l.Lk)("em",null,"You don't have any API keys yet.",-1),_s=[Es],Ss=["onClick"],Xs=(0,l.Lk)("div",{class:"hr"},null,-1),As=(0,l.Lk)("div",{class:"hr"},null,-1);function Ts(t,e,n,r,a,s){const i=(0,l.g2)("apiConfigBuilder");return(0,l.uX)(),(0,l.CE)("div",Ls,[ws,bs,Cs,s.apiKeySets.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",xs,_s)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.apiKeySets,(t=>((0,l.uX)(),(0,l.CE)("li",null,[(0,l.eW)((0,b.v_)(t)+" (",1),(0,l.Lk)("a",{href:"#",onClick:(0,bt.D$)((e=>s.removeApiKey(t)),["prevent"])},"remove",8,Ss),(0,l.eW)(")")])))),256))]),t.addApiToggle?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("a",{key:1,class:"btn--primary",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.openAddApi&&s.openAddApi(...t)),["prevent"]))},"Add an API key")),t.addApiToggle?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[Xs,(0,l.bF)(i)],64)):(0,l.Q3)("",!0),As])}const Fs={class:"grd contain"},Ps=(0,l.Lk)("h3",null,"Add an API key",-1),zs=(0,l.Lk)("p",null,"Make sure that the API key has the permissions to create and cancel orders and view balances.",-1),$s={class:"grd-row"},Qs={class:"grd-row-col-3-6 mx1"},Ws=(0,l.Lk)("h3",null,"Exchange",-1),Ms={class:"grd-row-col-3-6 mx1"},Gs=(0,l.Lk)("h3",null,"Credentials",-1),Ds=["onUpdate:modelValue"],Is={class:"txt--center"};function Ks(t,e,n,r,a,s){const i=(0,l.g2)("exchange-picker");return(0,l.uX)(),(0,l.CE)("div",Fs,[Ps,zs,(0,l.Lk)("div",$s,[(0,l.Lk)("div",Qs,[Ws,(0,l.bF)(i,{onExchange:s.updateExchange,"only-tradable":"true"},null,8,["onExchange"])]),(0,l.Lk)("div",Ms,[Gs,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.requires,(e=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("label",null,(0,b.v_)(e),1),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":n=>t.credentials[e]=n},null,8,Ds),[[bt.Jo,t.credentials[e]]])],64)))),256))])]),(0,l.Lk)("div",Is,[(0,l.Lk)("a",{class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.upload&&s.upload(...t)),["prevent"]))},"Add")])])}const Us=t=>((0,l.Qi)("data-v-de7d2e52"),t=t(),(0,l.jt)(),t),Rs={class:"mx1"},Ys=Us((()=>(0,l.Lk)("label",{class:"wrapper",for:"exchange"},"Exchange:",-1))),Hs={class:"custom-select button"};function Os(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",Rs,[Ys,(0,l.Lk)("div",Hs,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.exchange=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.exchanges,((t,e)=>((0,l.uX)(),(0,l.CE)("option",{key:e},(0,b.v_)(e),1)))),128))],512),[[bt.u1,t.exchange]])])])])}var Ns={props:["onlyTradable","onlyImportable"],data:()=>({exchange:"poloniex"}),created:function(){this.emitExchange()},computed:{exchanges:function(){let t=Object.assign({},this.$store.state.exchanges);return!tt().isEmpty(t)&&(this.onlyTradable&&tt().each(t,((e,n)=>{e.tradable||delete t[n]})),this.onlyImportable&&tt().each(t,((e,n)=>{e.importable||delete t[n]})),t)}},watch:{exchanges:function(){this.emitExchange()},exchange:function(){this.emitExchange()}},methods:{emitExchange:function(){this.$emit("exchange",this.exchange)}}};const Vs=(0,y.A)(Ns,[["render",Os],["__scopeId","data-v-de7d2e52"]]);var js=Vs,Bs={data:()=>({exchange:!1,credentials:{}}),components:{exchangePicker:js},computed:{apiKeySets:function(){return this.$store.state.apiKeys},exchanges:function(){return this.$store.state.exchanges},requires:function(){return this.exchanges&&this.exchange?this.exchanges[this.exchange].requires:[]},config:function(){let t={exchange:this.exchange,values:this.credentials};return t}},watch:{credentials:function(){this.emitConfig()}},methods:{updateExchange:function(t){this.credentials={},this.exchange=t,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)},upload:function(){let t=this.config.exchange;this.exchanges&&this.apiKeySets.includes(t)&&!confirm(`You already have API keys for ${t} defined, do you want to overwrite them?`)||de("addApiKey",this.config,((t,e)=>{if(t)return alert(t);this.credentials={}}))}}};const qs=(0,y.A)(Bs,[["render",Ks]]);var Js=qs,Zs={components:{apiConfigBuilder:Js},data:()=>({addApiToggle:!1}),methods:{openAddApi:function(){this.addApiToggle=!0},removeApiKey:function(t){confirm("Are you sure you want to delete these API keys?")&&de("removeApiKey",{exchange:t},((t,e)=>{if(t)return alert(t)}))}},computed:{apiKeySets:function(){return this.$store.state.apiKeys}},watch:{apiKeySets:function(){this.addApiToggle=!1}}};const ti=(0,y.A)(Zs,[["render",Ts]]);var ei=ti;const ni={class:"contain py2"},ri=(0,l.Lk)("h3",null,"Market watchers",-1),ai={key:0,class:"text"},si=(0,l.Lk)("p",null,"You don't have any market watchers.",-1),ii=[si],oi={key:1,class:"full clickable"},li=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"exchange"),(0,l.Lk)("th",null,"currency"),(0,l.Lk)("th",null,"asset"),(0,l.Lk)("th",null,"status"),(0,l.Lk)("th",null,"started at"),(0,l.Lk)("th",null,"last update"),(0,l.Lk)("th",null,"duration")])],-1),ci=["onClick"],di=(0,l.Lk)("h3",null,"Strat runners",-1),ui={key:2,class:"text"},hi=(0,l.Lk)("p",null,"You don't have any stratrunners.",-1),ki=[hi],pi={key:3,class:"full"},mi=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"exchange"),(0,l.Lk)("th",null,"currency"),(0,l.Lk)("th",null,"asset"),(0,l.Lk)("th",null,"status"),(0,l.Lk)("th",null,"duration"),(0,l.Lk)("th",null,"strategy"),(0,l.Lk)("th",null,"PnL"),(0,l.Lk)("th",null,"type"),(0,l.Lk)("th",null,"trades")])],-1),gi=["onClick"],fi=(0,l.Lk)("div",{class:"hr"},null,-1),vi=(0,l.Lk)("h2",null,"Start a new live Gekko",-1);function yi(t,e,n,r,a,s){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",ni,[ri,s.watchers.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ai,ii)),s.watchers.length?((0,l.uX)(),(0,l.CE)("table",oi,[li,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.watchers,(e=>((0,l.uX)(),(0,l.CE)("tr",{class:"clickable",onClick:n=>t.$router.push({path:`/live-gekkos/${e.id}`})},[(0,l.Lk)("td",null,(0,b.v_)(e.config.watch.exchange),1),(0,l.Lk)("td",null,(0,b.v_)(e.config.watch.currency),1),(0,l.Lk)("td",null,(0,b.v_)(e.config.watch.asset),1),(0,l.Lk)("td",null,(0,b.v_)(s.status(e)),1),(0,l.Lk)("td",null,[e.events.initial.candle?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,b.v_)(s.fmt(e.events.initial.candle.start)),1)],64)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,[e.events.latest.candle?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,b.v_)(s.fmt(e.events.latest.candle.start)),1)],64)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,[e.events.initial.candle&&e.events.latest.candle?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,b.v_)(s.timespan(e.events.latest.candle.start,e.events.initial.candle.start)),1)],64)):(0,l.Q3)("",!0)])],8,ci)))),256))])])):(0,l.Q3)("",!0),di,s.stratrunners.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ui,ki)),s.stratrunners.length?((0,l.uX)(),(0,l.CE)("table",pi,[mi,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.stratrunners,(e=>((0,l.uX)(),(0,l.CE)("tr",{class:"clickable",onClick:n=>t.$router.push({path:`/live-gekkos/${e.id}`})},[(0,l.Lk)("td",null,(0,b.v_)(e.config.watch.exchange),1),(0,l.Lk)("td",null,(0,b.v_)(e.config.watch.currency),1),(0,l.Lk)("td",null,(0,b.v_)(e.config.watch.asset),1),(0,l.Lk)("td",null,(0,b.v_)(s.status(e)),1),(0,l.Lk)("td",null,[e.events.initial.candle&&e.events.latest.candle?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,b.v_)(s.timespan(e.events.latest.candle.start,e.events.initial.candle.start)),1)],64)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,(0,b.v_)(e.config.tradingAdvisor.method),1),(0,l.Lk)("td",null,[s.report(e)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)("0")],64)),s.report(e)?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,b.v_)(s.round(s.report(e).profit))+" "+(0,b.v_)(s.report(e).currency),1)],64)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,(0,b.v_)(e.logType),1),(0,l.Lk)("td",null,[e.events.tradeCompleted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)("0")],64)),e.events.tradeCompleted?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,b.v_)(e.events.tradeCompleted.length),1)],64)):(0,l.Q3)("",!0)])],8,gi)))),256))])])):(0,l.Q3)("",!0),fi,vi,(0,l.bF)(i,{class:"btn--primary",to:"/live-gekkos/new"},{default:(0,l.k6)((()=>[(0,l.eW)("Start a new live Gekko!")])),_:1})])}var Li={created:function(){this.timer=setInterval((()=>{this.now=moment()}),1e3)},destroyed:function(){clearTimeout(this.timer)},data:()=>({timer:!1,now:moment()}),computed:{stratrunners:function(){return _.values(this.$store.state.gekkos).concat(_.values(this.$store.state.archivedGekkos)).filter((t=>"papertrader"===t.logType||"tradebot"===t.logType))},watchers:function(){return _.values(this.$store.state.gekkos).concat(_.values(this.$store.state.archivedGekkos)).filter((t=>"watcher"===t.logType))}},methods:{humanizeDuration:t=>window.humanizeDuration(t),moment:t=>moment.utc(t),fmt:t=>moment.utc(t).format("YYYY-MM-DD HH:mm"),round:t=>(+t).toFixed(3),timespan:function(t,e){return this.humanizeDuration(this.moment(t).diff(this.moment(e)))},status:t=>t.errored?"errored":t.stopped?"stopped":t.active?"running":void console.log("unknown state:",t),report:t=>_.get(t,"events.latest.performanceReport")}};const wi=(0,y.A)(Li,[["render",yi]]);var bi=wi;const Ci={class:"contain my2"},xi=(0,l.Lk)("h3",null,"Start a new gekko",-1),Ei=(0,l.Lk)("div",{class:"hr"},null,-1),_i={key:0,class:"txt--center"};function Si(t,e,n,r,a,s){const i=(0,l.g2)("gekko-config-builder"),o=(0,l.g2)("spinner");return(0,l.uX)(),(0,l.CE)("div",Ci,[xi,(0,l.bF)(i,{onConfig:s.updateConfig},null,8,["onConfig"]),Ei,t.config.valid?((0,l.uX)(),(0,l.CE)("div",_i,[t.pendingStratrunner?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("a",{key:0,class:"w100--s my1 btn--primary",href:"#",onClick:e[0]||(e[0]=(0,bt.D$)(((...t)=>s.start&&s.start(...t)),["prevent"]))},"Start")),t.pendingStratrunner?((0,l.uX)(),(0,l.Wv)(o,{key:1})):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])}const Xi={class:"grd contain"},Ai={class:"grd-row"},Ti={class:"grd-row-col-3-6 mx1"},Fi=(0,l.Lk)("h3",null,"Market",-1),Pi={class:"grd-row-col-3-6 mx1"},zi=(0,l.Lk)("div",{class:"hr"},null,-1),$i={key:0,class:"hr"};function Qi(t,e,n,r,a,s){const i=(0,l.g2)("market-picker"),o=(0,l.g2)("type-picker"),c=(0,l.g2)("strat-picker"),d=(0,l.g2)("paper-trader");return(0,l.uX)(),(0,l.CE)("div",Xi,[(0,l.Lk)("div",Ai,[(0,l.Lk)("div",Ti,[Fi,(0,l.bF)(i,{onMarket:s.updateMarketConfig,"only-tradable":s.isTradebot},null,8,["onMarket","only-tradable"])]),(0,l.Lk)("div",Pi,[(0,l.bF)(o,{onType:s.updateType},null,8,["onType"])])]),"market watcher"!==t.type?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[zi,(0,l.bF)(c,{class:"contain my2",onStratConfig:s.updateStrat},null,8,["onStratConfig"]),"paper trader"===t.type?((0,l.uX)(),(0,l.CE)("div",$i)):(0,l.Q3)("",!0),"paper trader"===t.type?((0,l.uX)(),(0,l.Wv)(d,{key:1,onSettings:s.updatePaperTrader},null,8,["onSettings"])):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0)])}const Wi=(0,l.Lk)("h3",null,"Type",-1),Mi=(0,l.Lk)("label",{class:"wrapper",for:"type"},"What do you want to do with gekko?",-1),Gi={class:"radio grd"},Di={class:"grd-row m1"},Ii=["value"],Ki=["for"];function Ui(t,e,n,r,a,s){return(0,l.uX)(),(0,l.CE)("div",null,[Wi,(0,l.Lk)("template",null,[Mi,(0,l.Lk)("form",Gi,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.types,((n,r)=>((0,l.uX)(),(0,l.CE)("div",Di,[(0,l.bo)((0,l.Lk)("input",{class:"grd-row-col-1-6",type:"radio",value:r,"onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedTypeIndex=e)},null,8,Ii),[[bt.XL,t.selectedTypeIndex]]),(0,l.Lk)("label",{class:"grd-row-col-5-6",for:r},(0,b.v_)(n),9,Ki)])))),256))])])])}var Ri={created:function(){this.emitType()},data:()=>({types:["paper trader","market watcher","tradebot"],selectedTypeIndex:0}),methods:{emitType:function(){this.$emit("type",this.type)}},watch:{type:function(){this.emitType()}},computed:{type:function(){return this.types[this.selectedTypeIndex]}}};const Yi=(0,y.A)(Ri,[["render",Ui]]);var Hi=Yi,Oi={created:function(){ue("configPart/candleWriter",((t,e)=>{this.candleWriter=toml.parse(e.part)})),ue("configPart/performanceAnalyzer",((t,e)=>{this.performanceAnalyzer=toml.parse(e.part),this.performanceAnalyzer.enabled=!0}))},data:()=>({market:{},range:{},type:"",strat:{},paperTrader:{},candleWriter:{},performanceAnalyzer:{}}),components:{marketPicker:Xa,typePicker:Hi,stratPicker:Be,paperTrader:sn},computed:{isTradebot:function(){return"tradebot"===this.type},config:function(){let t={};return Object.assign(t,this.market,this.strat,{paperTrader:this.paperTrader},{candleWriter:this.candleWriter},{type:this.type},{performanceAnalyzer:this.performanceAnalyzer}),this.isTradebot&&(delete t.paperTrader,t.trader={enabled:!0}),t.valid=this.validConfig(t),t}},methods:{validConfig:t=>{if("market watcher"===t.type)return!0;if(!t.tradingAdvisor)return!1;if(tt().isNaN(t.tradingAdvisor.candleSize))return!1;if(0==t.tradingAdvisor.candleSize)return!1;let e=t.tradingAdvisor.method;return!tt().isEmpty(t[e])},updateMarketConfig:function(t){this.market=t,this.emitConfig()},updateType:function(t){this.type=t,this.emitConfig()},updateStrat:function(t){this.strat=t,this.emitConfig()},updatePaperTrader:function(t){this.paperTrader=t,this.paperTrader.enabled=!0,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)}}};const Ni=(0,y.A)(Oi,[["render",Qi]]);var Vi=Ni,ji={components:{gekkoConfigBuilder:Vi,spinner:we},data:()=>({pendingStratrunner:!1,config:{}}),computed:{gekkos:function(){return this.$store.state.gekkos},watchConfig:function(){let t=tt().pick(this.config,"watch","candleWriter"),e=o["default"].util.extend({},t);return e.type="market watcher",e.mode="realtime",e},requiredHistoricalData:function(){if(!this.config.tradingAdvisor||!this.config.valid)return;let t=this.config.tradingAdvisor;return t.candleSize*t.historySize},gekkoConfig:function(){var t;if(!this.existingMarketWatcher)return;if(this.requiredHistoricalData){const e=moment().utc().startOf("minute").subtract(this.requiredHistoricalData,"minutes").unix(),n=moment.utc(this.existingMarketWatcher.events.initial.candle.start).unix();t=moment.unix(Math.max(e,n)).utc().format()}else t=moment().utc().startOf("minute").format();const e=o["default"].util.extend({market:{type:"leech",from:t},mode:"realtime"},this.config);return e},existingMarketWatcher:function(){const t=o["default"].util.extend({},this.watchConfig.watch);return tt().find(this.gekkos,{config:{watch:t}})},exchange:function(){return this.watchConfig.watch.exchange},existingTradebot:function(){return tt().find(this.gekkos,(t=>"tradebot"===t.logType&&t.config.watch.exchange===this.exchange))},availableApiKeys:function(){return this.$store.state.apiKeys}},watch:{existingMarketWatcher:function(t,e){if(!this.pendingStratrunner)return;const n=this.existingMarketWatcher;n.events.latest.candle&&(this.pendingStratrunner=!1,this.startGekko(((t,e)=>{this.$router.push({path:`/live-gekkos/${e.id}`})})))}},methods:{updateConfig:function(t){this.config=t},start:function(){if("tradebot"===this.config.type){if(this.existingTradebot){let t="You already have a tradebot running on this exchange";return t+=", you can only run one tradebot per exchange.",alert(t)}if(!this.availableApiKeys.includes(this.exchange))return alert("Please first configure API keys for this exchange in the config page.")}"market watcher"===this.config.type?this.existingMarketWatcher?(alert("This market is already being watched, redirecting you now..."),this.$router.push({path:`/live-gekkos/${this.existingMarketWatcher.id}`})):this.startWatcher(((t,e)=>{this.$router.push({path:`/live-gekkos/${e.id}`})})):this.existingMarketWatcher?this.startGekko(this.routeToGekko):this.startWatcher(((t,e)=>{this.pendingStratrunner=e.id}))},routeToGekko:function(t,e){if(t||e.error)return console.error(t,e.error);this.$router.push({path:`/live-gekkos/${e.id}`})},startWatcher:function(t){de("startGekko",this.watchConfig,t)},startGekko:function(t){de("startGekko",this.gekkoConfig,t)}}};const Bi=(0,y.A)(ji,[["render",Si]]);var qi=Bi;const Ji={class:"my2"},Zi={key:0,class:"contain"},to=(0,l.Lk)("h1",null,"Unknown Gekko instance",-1),eo=(0,l.Lk)("p",null,"Gekko doesn't know what gekko this is...",-1),no=[to,eo],ro={key:1},ao={class:"contain"},so={key:0,class:"contain brdr--mid-gray p1 bg--orange"},io={key:1,class:"contain brdr--mid-gray p1 bg--orange"},oo={class:"grd contain"},lo={class:"grd-row"},co={class:"grd-row-col-3-6"},uo=(0,l.Lk)("h3",null,"Market",-1),ho={class:"grd-row"},ko=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Exchange",-1),po={class:"grd-row-col-3-6"},mo={class:"grd-row"},go=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Currency",-1),fo={class:"grd-row-col-3-6"},vo={class:"grd-row"},yo=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Asset",-1),Lo={class:"grd-row-col-3-6"},wo={class:"grd-row"},bo=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Type",-1),Co={class:"grd-row-col-3-6"},xo={class:"grd-row-col-3-6"},Eo=(0,l.Lk)("h3",null,"Runtime",-1),_o={key:0,class:"grd-row"},So=(0,l.Lk)("div",{class:"grd-row-col-2-6"},"Watching since",-1),Xo={class:"grd-row-col-4-6"},Ao={key:1,class:"grd-row"},To=(0,l.Lk)("div",{class:"grd-row-col-2-6"},"Received data until",-1),Fo={class:"grd-row-col-4-6"},Po={key:2,class:"grd-row"},zo=(0,l.Lk)("div",{class:"grd-row-col-2-6"},"Data spanning",-1),$o={class:"grd-row-col-4-6"},Qo={class:"grd-row"},Wo=(0,l.Lk)("div",{class:"grd-row-col-2-6"},"Amount of trades",-1),Mo={class:"grd-row-col-4-6"},Go={class:"grd-row"},Do=(0,l.Lk)("div",{class:"grd-row-col-2-6"},"Candle size",-1),Io={class:"grd-row-col-4-6"},Ko={class:"grd-row"},Uo=(0,l.Lk)("div",{class:"grd-row-col-2-6"},"History size",-1),Ro={class:"grd-row-col-4-6"},Yo={key:0,class:"contain brdr--mid-gray p1 bg--orange"},Ho={key:1,class:"grd-row"},Oo={class:"grd-row-col-3-6"},No=(0,l.Lk)("h3",null,"Strategy",-1),Vo={class:"grd-row"},jo=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Name",-1),Bo={class:"grd-row-col-3-6"},qo={class:"grd-row-col-3-6"},Jo=(0,l.Lk)("h3",null,"Profit report",-1),Zo={key:0},tl={key:0},el={key:1},nl={class:"grd-row"},rl=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Start balance",-1),al={class:"grd-row-col-3-6"},sl={class:"grd-row"},il=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Current balance",-1),ol={class:"grd-row-col-3-6"},ll={class:"grd-row"},cl=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Market",-1),dl={class:"grd-row-col-3-6"},ul={class:"grd-row"},hl=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Profit",-1),kl={class:"grd-row-col-3-6"},pl={class:"grd-row"},ml=(0,l.Lk)("div",{class:"grd-row-col-3-6"},"Alpha",-1),gl={class:"grd-row-col-3-6"},fl={key:2},vl=(0,l.Lk)("a",{href:"https://github.com/askmike/gekko/issues"},"here",-1),yl={key:3},Ll={key:4},wl={key:5},bl=(0,l.Lk)("h3",{class:"contain"},"Market graph",-1);function Cl(t,e,n,r,a,s){const i=(0,l.g2)("spinner"),o=(0,l.g2)("router-link"),c=(0,l.g2)("chart"),d=(0,l.g2)("roundtrips");return(0,l.uX)(),(0,l.CE)("div",Ji,[s.data?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",Zi,no)),s.data?((0,l.uX)(),(0,l.CE)("div",ro,[(0,l.Lk)("h2",ao,"Gekko "+(0,b.v_)(s.type),1),s.isArchived?((0,l.uX)(),(0,l.CE)("div",so,"This is an archived Gekko, it is currently not running anymore.")):(0,l.Q3)("",!0),s.data.errorMessage?((0,l.uX)(),(0,l.CE)("div",io,"This is Gekko crashed with the following error: "+(0,b.v_)(s.data.errorMessage),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",oo,[(0,l.Lk)("div",lo,[(0,l.Lk)("div",co,[uo,(0,l.Lk)("div",ho,[ko,(0,l.Lk)("div",po,(0,b.v_)(s.config.watch.exchange),1)]),(0,l.Lk)("div",mo,[go,(0,l.Lk)("div",fo,(0,b.v_)(s.config.watch.currency),1)]),(0,l.Lk)("div",vo,[yo,(0,l.Lk)("div",Lo,(0,b.v_)(s.config.watch.asset),1)]),(0,l.Lk)("div",wo,[bo,(0,l.Lk)("div",Co,(0,b.v_)(s.type),1)])]),(0,l.Lk)("div",xo,[Eo,s.isLoading?((0,l.uX)(),(0,l.Wv)(i,{key:0})):(0,l.Q3)("",!0),s.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[s.initialEvents.candle?((0,l.uX)(),(0,l.CE)("div",_o,[So,(0,l.Lk)("div",Xo,(0,b.v_)(s.fmt(s.initialEvents.candle.start)),1)])):(0,l.Q3)("",!0),s.latestEvents.candle?((0,l.uX)(),(0,l.CE)("div",Ao,[To,(0,l.Lk)("div",Fo,(0,b.v_)(s.fmt(s.latestEvents.candle.start)),1)])):(0,l.Q3)("",!0),s.latestEvents.candle?((0,l.uX)(),(0,l.CE)("div",Po,[zo,(0,l.Lk)("div",$o,(0,b.v_)(s.humanizeDuration(s.moment(s.latestEvents.candle.start).diff(s.moment(s.initialEvents.candle.start)))),1)])):(0,l.Q3)("",!0),s.isStratrunner?((0,l.uX)(),(0,l.CE)(l.FK,{key:3},[(0,l.Lk)("div",Qo,[Wo,(0,l.Lk)("div",Mo,(0,b.v_)(s.trades.length),1)]),(0,l.Lk)("div",Go,[Do,(0,l.Lk)("div",Io,(0,b.v_)(s.config.tradingAdvisor.candleSize),1)]),(0,l.Lk)("div",Ko,[Uo,(0,l.Lk)("div",Ro,(0,b.v_)(s.config.tradingAdvisor.historySize),1)])],64)):(0,l.Q3)("",!0)],64))])]),s.warmupRemaining?((0,l.uX)(),(0,l.CE)("div",Yo,[(0,l.eW)("This stratrunner is still warming up for the next "),(0,l.Lk)("i",null,(0,b.v_)(s.warmupRemaining.replace(","," and ")),1),(0,l.eW)(", it will not trade until it is warmed up.")])):(0,l.Q3)("",!0),s.isStratrunner?((0,l.uX)(),(0,l.CE)("div",Ho,[(0,l.Lk)("div",Oo,[No,(0,l.Lk)("div",Vo,[jo,(0,l.Lk)("div",Bo,[(0,l.Lk)("strong",null,(0,b.v_)(s.stratName),1)])]),(0,l.eW)("Parameters"),(0,l.Lk)("pre",null,(0,b.v_)(s.stratParams),1)]),(0,l.Lk)("div",qo,[Jo,s.report?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",Zo,[s.isArchived?((0,l.uX)(),(0,l.CE)("em",tl,"This Gekko never executed a trade..")):(0,l.Q3)("",!0),s.isArchived?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("em",el,"Waiting for at least one trade.."))])),s.report?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",nl,[rl,(0,l.Lk)("div",al,(0,b.v_)(s.round(s.report.startBalance)),1)]),(0,l.Lk)("div",sl,[il,(0,l.Lk)("div",ol,(0,b.v_)(s.round(s.report.balance)),1)]),(0,l.Lk)("div",ll,[cl,(0,l.Lk)("div",dl,(0,b.v_)(s.round(s.report.market/100*s.report.startPrice))+" "+(0,b.v_)(s.config.watch.currency)+" ("+(0,b.v_)(s.round(s.report.market))+" %)",1)]),(0,l.Lk)("div",ul,[hl,(0,l.Lk)("div",kl,(0,b.v_)(s.round(s.report.profit))+" "+(0,b.v_)(s.config.watch.currency)+" ("+(0,b.v_)(s.round(s.report.relativeProfit))+" %)",1)]),(0,l.Lk)("div",pl,[ml,(0,l.Lk)("div",gl,(0,b.v_)(s.round(s.report.alpha))+" "+(0,b.v_)(s.config.watch.currency),1)])],64)):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0),!s.isStratrunner||s.watcher||s.isArchived?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",fl,[(0,l.eW)("WARNING: stale gekko, not attached to a watcher, please report "),vl,(0,l.eW)(".")])),s.isArchived?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",yl,[(0,l.Lk)("a",{class:"w100--s my1 btn--red",onClick:e[0]||(e[0]=(...t)=>s.stopGekko&&s.stopGekko(...t))},"Stop Gekko")])),s.isArchived?((0,l.uX)(),(0,l.CE)("p",Ll,[(0,l.Lk)("a",{class:"w100--s my1 btn--red",onClick:e[1]||(e[1]=(...t)=>s.deleteGekko&&s.deleteGekko(...t))},"Delete Gekko")])):(0,l.Q3)("",!0),s.isStratrunner&&s.watcher&&!s.isArchived?((0,l.uX)(),(0,l.CE)("p",wl,[(0,l.Lk)("em",null,[(0,l.eW)("This gekko gets market data from "),(0,l.bF)(o,{to:"/live-gekkos/"+s.watcher.id},{default:(0,l.k6)((()=>[(0,l.eW)("this market watcher")])),_:1},8,["to"])]),(0,l.eW)(".")])):(0,l.Q3)("",!0)]),s.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[bl,"fetching"===t.candleFetch?((0,l.uX)(),(0,l.Wv)(i,{key:0})):(0,l.Q3)("",!0),"fetched"===t.candleFetch?((0,l.uX)(),(0,l.Wv)(c,{key:1,data:s.chartData,height:300},null,8,["data"])):(0,l.Q3)("",!0),s.isStratrunner?((0,l.uX)(),(0,l.Wv)(d,{key:2,roundtrips:s.roundtrips},null,8,["roundtrips"])):(0,l.Q3)("",!0)],64))])):(0,l.Q3)("",!0)])}var xl={created:function(){this.isLoading||this.getCandles()},components:{spinner:we,chart:Nn,paperTradeSummary:Wn,roundtrips:lr},data:()=>({candleFetch:"idle",candles:!1}),computed:{id:function(){return this.$route.params.id},gekkos:function(){return this.$store.state.gekkos},archivedGekkos:function(){return this.$store.state.archivedGekkos},data:function(){return!!this.gekkos&&(tt().has(this.gekkos,this.id)?this.gekkos[this.id]:!!tt().has(this.archivedGekkos,this.id)&&this.archivedGekkos[this.id])},config:function(){return tt().get(this,"data.config")},latestEvents:function(){return tt().get(this,"data.events.latest")},initialEvents:function(){return tt().get(this,"data.events.initial")},trades:function(){return tt().get(this,"data.events.tradeCompleted")||[]},roundtrips:function(){return tt().get(this,"data.events.roundtrip")||[]},isLive:function(){return tt().has(this.gekkos,this.id)},type:function(){return this.data.logType},isStratrunner:function(){return"watcher"!==this.type},isArchived:function(){return this.data.stopped},warmupRemaining:function(){if(!this.isStratrunner)return!1;if(this.isArchived)return!1;if(this.initialEvents.stratWarmupCompleted)return!1;if(!this.initialEvents.candle)return!1;const t=tt().get(this.config,"tradingAdvisor.historySize");if(!t)return!1;const e=tt().get(this.config,"tradingAdvisor.candleSize")*t;return humanizeDuration(moment(this.initialEvents.candle.start).add(e,"m").diff(moment()),{largest:2})},chartData:function(){return{candles:this.candles,trades:this.trades}},report:function(){return tt().get(this.latestEvents,"performanceReport")},stratName:function(){if(this.data)return this.data.config.tradingAdvisor.method},stratParams:function(){if(!this.data)return"Loading...";let t=o["default"].util.extend({},this.data.config[this.stratName]);return delete t.__empty,tt().isEmpty(t)?"No parameters":JSON.stringify(t,null,4)},isLoading:function(){return!this.data||(!tt().get(this.data,"events.initial.candle")||!tt().get(this.data,"events.latest.candle"))},watcher:function(){if(!this.isStratrunner)return!1;let t=o["default"].util.extend({},this.data.config.watch);return tt().find(this.gekkos,(e=>e.id!==this.id&&tt().isEqual(t,e.config.watch)))},hasLeechers:function(){if(this.isStratrunner)return!1;let t=o["default"].util.extend({},this.data.config.watch);return tt().find(this.gekkos,(e=>e.id!==this.id&&tt().isEqual(t,e.config.watch)))}},watch:{"data.events.latest.candle.start":function(){setTimeout(this.getCandles,tt().random(100,2e3))}},methods:{round:t=>(+t).toFixed(5),humanizeDuration:(t,e)=>window.humanizeDuration(t,e),moment:t=>moment.utc(t),fmt:t=>moment.utc(t).format("YYYY-MM-DD HH:mm"),getCandles:function(){if(this.isLoading)return;if("fetching"===this.candleFetch)return;this.candleFetch="fetching";let t=this.data.events.latest.candle.start,e=this.data.events.initial.candle.start,n=1;"watcher"!==this.type&&(n=this.data.config.tradingAdvisor.candleSize);let r={watch:this.data.config.watch,daterange:{to:t,from:e},candleSize:n};setTimeout((()=>{de("getCandles",r,((t,e)=>{if(this.candleFetch="fetched",!e||e.error||!tt().isArray(e))return console.log(e);this.candles=e.map((t=>(t.start=moment.unix(t.start).utc().format(),t)))}))}),tt().random(150,2500))},stopGekko:function(){if(this.hasLeechers)return alert("This Gekko is fetching market data for multiple stratrunners, stop these first.");confirm("Are you sure you want to stop this Gekko?")&&de("stopGekko",{id:this.data.id},((t,e)=>{console.log("stopped gekko")}))},deleteGekko:function(){if(!this.isArchived)return alert("This Gekko is still running, stop it first!");confirm("Are you sure you want to delete this Gekko?")&&de("deleteGekko",{id:this.data.id},((t,e)=>{this.$router.push({path:"/live-gekkos/"})}))}}};const El=(0,y.A)(xl,[["render",Cl]]);var _l=El;const Sl=()=>{ue("imports",((t,e)=>{wt.commit("syncImports",e)}))},Xl=()=>{Ul.$on("import_update",(t=>{wt.commit("updateImport",t)}))};function Al(){Sl(),Xl()}const Tl=()=>{ue("gekkos",((t,e)=>{const n=e;wt.commit("syncGekkos",n)}))},Fl=()=>{Ul.$on("gekko_new",(t=>wt.commit("addGekko",t.state))),Ul.$on("gekko_event",(t=>wt.commit("updateGekko",t))),Ul.$on("gekko_archived",(t=>wt.commit("archiveGekko",t.id))),Ul.$on("gekko_error",(t=>wt.commit("errorGekko",t))),Ul.$on("gekko_deleted",(t=>wt.commit("deleteGekko",t.id)))};function Pl(){Tl(),Fl()}const zl=()=>{},$l=()=>{Ul.$on("WS_STATUS_CHANGE",(t=>wt.commit("setGlobalWarning",{key:"connected",value:t.connected})))};function Ql(){zl(),$l()}const Wl=t=>{if(!t)return{};var e=t,n={};return e.forEach((t=>{n[t.slug]=n[t.slug]||{markets:{}},t.markets.forEach((e=>{let[r,a]=e["pair"];n[t.slug].markets[r]=n[t.slug].markets[r]||[],n[t.slug].markets[r].push(a)})),"exchangeMaxHistoryAge"in t&&(n[t.slug].exchangeMaxHistoryAge=t.exchangeMaxHistoryAge),n[t.slug].importable=!!t.providesFullHistory,n[t.slug].tradable=!!t.tradable,n[t.slug].requires=t.requires})),n},Ml=()=>{ue("apiKeys",((t,e)=>{wt.commit("syncApiKeys",e)})),ue("exchanges",((t,e)=>{wt.commit("syncExchanges",Wl(e))}))},Gl=()=>{Ul.$on("apiKeys",(t=>{wt.commit("syncApiKeys",t.exchanges)}))};function Dl(){Ml(),Gl()}function Il(){Al(),Pl(),Ql(),Dl()}var Kl=null;const Ul=new o["default"];Ul.$on("gekko_update",(t=>console.log(t))),Ul.$on("import_update",(t=>console.log(t))),Ul.$on("import_error",(t=>{alert("IMPORT ERROR: "+t.error)}));const Rl={connected:!1},Yl=()=>{Kl=new ReconnectingWebSocket(le,null,{maxReconnectInterval:4e3}),setTimeout((()=>{Rl.connected||(Il(),Ul.$emit("WS_STATUS_CHANGE",Rl))}),500),Kl.onopen=()=>{Rl.connected||(Rl.connected=!0,Ul.$emit("WS_STATUS_CHANGE",Rl),Il())},Kl.onclose=()=>{Rl.connected&&(Rl.connected=!1,Ul.$emit("WS_STATUS_CHANGE",Rl))},Kl.onerror=()=>{Rl.connected&&(Rl.connected=!1,Ul.$emit("WS_STATUS_CHANGE",Rl))},Kl.onmessage=function(t){const e=JSON.parse(t.data);Ul.$emit(e.type,e)}};var Hl="/";o["default"].use(q["default"]);const Ol=new q["default"]({mode:"hash",base:Hl,routes:[{path:"/",redirect:"/home"},{path:"/home",component:br},{path:"/backtest",component:pr},{path:"/config",component:ei},{path:"/data",component:Rr},{path:"/data/importer",component:Qa},{path:"/data/importer/import/:id",component:ys},{path:"/live-gekkos",component:bi},{path:"/live-gekkos/new",component:qi},{path:"/live-gekkos/:id",component:_l}]});Yl(),new o["default"]({router:Ol,store:wt,el:"#app",render:t=>t(B)})},2634:function(){}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var s=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,s){if(!r){var i=1/0;for(d=0;d<t.length;d++){r=t[d][0],a=t[d][1],s=t[d][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[l])}))?r.splice(l--,1):(o=!1,s<i&&(i=s));if(o){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,a,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,s,i=r[0],o=r[1],l=r[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)var d=l(n)}for(e&&e(r);c<i.length;c++)s=i[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(d)},r=self["webpackChunkgekko_vue_ui"]=self["webpackChunkgekko_vue_ui"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(5532)}));r=n.O(r)})();
//# sourceMappingURL=app.0445b785.js.map